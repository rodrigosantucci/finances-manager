import{a as Re,b as ze,d as k,e as Ue,f as Ve,g as he}from"./chunk-WRDJYOCB.js";import{a as je,b as qe}from"./chunk-PYM2POMD.js";import{f as R,g as h,h as Ne}from"./chunk-F7SIOTBY.js";import{t as te,v as re}from"./chunk-4N6SU46F.js";import{Db as He,E as Ae,Fb as Be,Ha as Oe,Ta as Ye,ba as Ee,e as ee,ea as Te,ja as de,la as le,ma as me,na as Pe,ra as $e,va as Le}from"./chunk-BL6LWGXP.js";import{$ as fe,Ac as Ce,Ca as $,D as p,Db as H,Eb as B,H as j,Ja as ve,Kb as G,Lb as L,Nb as O,Pb as K,Pc as J,Sa as _e,Sb as X,Sc as y,T as V,Tc as Me,W as S,Wb as w,Xb as _,Yb as D,Z as b,aa as M,ac as Q,ba as F,bc as ye,da as ge,dc as N,f as pe,fc as ke,ga as m,gc as Z,hc as W,jb as I,lc as De,m as l,mc as xe,n as x,nc as Se,pd as Fe,q as f,qa as be,qc as Ie,ra as T,sa as P,ta as q,w as ne,xb as Y,ya as we,yb as A}from"./chunk-ZR6WDTF5.js";import{a as U,b as ce}from"./chunk-4X36HX5K.js";var _t={production:!0,baseUrl:"https://apis.dividendosparatodos.com.br/services/",authUrl:"https://apis.dividendosparatodos.com.br/services/",useHash:!1};function ae(i,n,e){let t=h(i,e?.in);if(isNaN(n))return R(e?.in||i,NaN);if(!n)return t;let r=t.getDate(),a=R(e?.in||i,t.getTime());a.setMonth(t.getMonth()+n+1,0);let c=a.getDate();return r>=c?a:(t.setFullYear(a.getFullYear(),a.getMonth(),r),t)}function Ge(i,n,e){return R(e?.in||i,+h(i)+n)}function Ke(i,n,e){return Ge(i,n*1e3,e)}function Xe(i,n,e){return ae(i,n*12,e)}function Qe(i,n){let e=h(i,n?.in);if(isNaN(+e))throw new RangeError("Invalid time value");let t=n?.format??"extended",r=n?.representation??"complete",a="",c="",o=t==="extended"?"-":"",d=t==="extended"?":":"";if(r!=="time"){let s=k(e.getDate(),2),g=k(e.getMonth()+1,2);a=`${k(e.getFullYear(),4)}${o}${g}${o}${s}`}if(r!=="date"){let s=e.getTimezoneOffset();if(s!==0){let E=Math.abs(s),se=k(Math.trunc(E/60),2),ot=k(E%60,2);c=`${s<0?"+":"-"}${se}:${ot}`}else c="Z";let g=k(e.getHours(),2),v=k(e.getMinutes(),2),u=k(e.getSeconds(),2),C=a===""?"":"T",z=[g,v,u].join(d);a=`${a}${C}${z}${c}`}return a}function Ze(i,n){return h(i,n?.in).getDate()}function We(i,n){return h(i,n?.in).getDay()}function Je(i,n){return h(i,n?.in).getHours()}function et(i,n){return h(i,n?.in).getMinutes()}function tt(i,n){return h(i,n?.in).getMonth()}function rt(i){return h(i).getSeconds()}function at(i,n){return h(i,n?.in).getFullYear()}function ue(i,n){let e=Array(i);for(let t=0;t<i;t++)e[t]=n(t);return e}var st={long:"LLLL",short:"LLL",narrow:"LLLLL"},ct={long:"EEEE",short:"EEE",narrow:"EEEEE"},nt=(()=>{class i extends me{constructor(){super();let e=m(le,{optional:!0});this.setLocale(e)}getYear(e){return at(e)}getMonth(e){return tt(e)}getDate(e){return Ze(e)}getDayOfWeek(e){return We(e)}getMonthNames(e){let t=st[e];return ue(12,r=>this.format(new Date(2017,r,1),t))}getDateNames(){let e=typeof Intl<"u"?new Intl.DateTimeFormat(this.locale.code,{day:"numeric",timeZone:"utc"}):null;return ue(31,t=>{if(e){let r=new Date;return r.setUTCFullYear(2017,0,t+1),r.setUTCHours(0,0,0,0),e.format(r).replace(/[\u200e\u200f]/g,"")}return t+""})}getDayOfWeekNames(e){let t=ct[e];return ue(7,r=>this.format(new Date(2017,0,r+1),t))}getYearName(e){return this.format(e,"y")}getFirstDayOfWeek(){return this.locale.options?.weekStartsOn??0}getNumDaysInMonth(e){return je(e)}clone(e){return new Date(e.getTime())}createDate(e,t,r){let a=new Date;return a.setFullYear(e,t,r),a.setHours(0,0,0,0),a.getMonth()!=t,a}today(){return new Date}parse(e,t){if(typeof e=="string"&&e.length>0){let r=he(e);if(this.isValid(r))return r;let a=Array.isArray(t)?t:[t];if(!t.length)throw Error("Formats array must not be empty.");for(let c of a){let o=Ve(e,c,new Date,{locale:this.locale});if(this.isValid(o))return o}return this.invalid()}else{if(typeof e=="number")return new Date(e);if(e instanceof Date)return this.clone(e)}return null}format(e,t){if(!this.isValid(e))throw Error("DateFnsAdapter: Cannot format invalid date.");return Ue(e,t,{locale:this.locale})}addCalendarYears(e,t){return Xe(e,t)}addCalendarMonths(e,t){return ae(e,t)}addCalendarDays(e,t){return Ne(e,t)}toIso8601(e){return Qe(e,{representation:"date"})}deserialize(e){if(typeof e=="string"){if(!e)return null;let t=he(e);if(this.isValid(t))return t}return super.deserialize(e)}isDateInstance(e){return Re(e)}isValid(e){return ze(e)}invalid(){return new Date(NaN)}setTime(e,t,r,a){return qe(this.clone(e),{hours:t,minutes:r,seconds:a,milliseconds:0})}getHours(e){return Je(e)}getMinutes(e){return et(e)}getSeconds(e){return rt(e)}parseTime(e,t){return this.parse(e,t)}addSeconds(e,t){return Ke(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=M({token:i,factory:i.\u0275fac})}return i})(),dt={parse:{dateInput:"P",timeInput:"p"},display:{dateInput:"P",timeInput:"p",monthYearLabel:"LLL uuuu",dateA11yLabel:"PP",monthYearA11yLabel:"LLLL uuuu",timeOptionLabel:"p"}};var er=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=A({type:i});static \u0275inj=F({providers:[lt()]})}return i})();function lt(i=dt){return[{provide:me,useClass:nt,deps:[le]},{provide:Pe,useValue:i}]}var dr=(()=>{class i{constructor(){this.http=m(ee),this.authService=m(re),this.store=m(te),this.apiUserPatrimonioPrefix="/api/patrimonios/usuario",this.apiCotacoesPrefix="/api/cotacoes/tickers",this.apiTransacoesPrefix="/api/transacoes/lote",this.PATRIMONIO_COMPLETO_KEY="patrimonioCompletoCache",this.PATRIMONIO_HISTORICO_KEY="patrimonioHistoricoCache",this.patrimonioCompletoCache$=null,this.cotacaoUSDCache$=null,this.patrimonioHistoricoCache$=null,this.apiUrl="/api"}getUsuarioIdObservable(){return this.authService.user().pipe(j(1),f(e=>e?.id))}createTransactionLote(e,t){let r=`${this.apiTransacoesPrefix}/${e}`;return this.http.post(r,t).pipe(b(()=>this.clearPatrimonioCache()))}createTransaction(e,t){let r=`${this.apiUrl}/transacoes/${e}/criarTransacao`;return this.http.post(r,t).pipe(b(()=>this.clearPatrimonioCache()))}getCotacaoUSD(){if(!this.cotacaoUSDCache$){let e=`${this.apiCotacoesPrefix}?tickers=USD/BRL`;this.cotacaoUSDCache$=this.http.get(e).pipe(f(t=>{if(!t||t.length===0)return console.warn("DashboardService: Empty or null USD quote response. Returning 0."),0;let r=t[0].valorCotacao;return typeof r!="number"||isNaN(r)||r<=0?(console.warn("DashboardService: Invalid 'valorCotacao' in response. Returning 0.",t[0]),0):r}),p(t=>(console.error("DashboardService: HTTP error fetching USD quote. Returning 0.",t),l(0))),V(1))}return this.cotacaoUSDCache$}parseFormattedString(e){if(e==null)return 0;if(typeof e=="number")return e;if(e.trim()==="")return 0;let t=e.trim();t=t.replace(/[^\d.,-]/g,""),t.includes(",")&&t.includes(".")?t.indexOf(",")>t.indexOf(".")?(t=t.replace(/\./g,""),t=t.replace(/,/g,".")):t=t.replace(/,/g,""):t.includes(",")&&(t=t.replace(/,/g,"."));let r=parseFloat(t);return isNaN(r)?(console.warn(`[DashboardService.parseFormattedString] Failed to parse: "${e}" -> "${t}". Returning 0.`),0):r}convertUsdToBrlNumeric(e,t){return t<=0?(console.warn(`[convertUsdToBrlNumeric] Invalid or zero USD quote (${t}). Returning assets without numeric conversion.`),e):e.map(r=>{let a=U({},r);if(a.moedaFormatada==="USD"){let c=this.parseFormattedString(a.valorAtualFormatado?.toString());a.valorAtualFormatado=isNaN(c)?0:c*t;let o=this.parseFormattedString(a.valorInvestidoFormatado?.toString());a.valorInvestidoFormatado=isNaN(o)?0:o*t;let d=this.parseFormattedString(a.precoMedioFormatado?.toString());a.precoMedioFormatado=isNaN(d)?0:d*t,a.lucroPrejuizoFormatado=a.valorAtualFormatado-a.valorInvestidoFormatado,a.moedaFormatada="BRL"}else a.valorAtualFormatado=this.parseFormattedString(a.valorAtualFormatado?.toString()),a.valorInvestidoFormatado=this.parseFormattedString(a.valorInvestidoFormatado?.toString()),a.precoMedioFormatado=this.parseFormattedString(a.precoMedioFormatado?.toString()),a.lucroPrejuizoFormatado=this.parseFormattedString(a.lucroPrejuizoFormatado?.toString());return a.quantidadeFormatada=this.parseFormattedString(a.quantidadeFormatada?.toString()),a})}getPatrimonioCompleto(){return this.patrimonioCompletoCache$||(this.patrimonioCompletoCache$=this.getUsuarioIdObservable().pipe(S(e=>{if(e==null)return console.error("User ID not available for fetching complete patrimony."),l([]);let t=`${this.apiUserPatrimonioPrefix}/${e}`;return ne({patrimonio:this.http.get(t).pipe(b(r=>console.log("Raw API Response:",r))),cotacao:this.getCotacaoUSD()}).pipe(S(({patrimonio:r,cotacao:a})=>{if(!r||r.length===0)return l([]);let c=r.map(s=>{let g=this.parseFormattedString(s.quantidade||s.quantidadeFormatada),v=this.parseFormattedString(s.precoMedio||s.precoMedioFormatado),u=this.parseFormattedString(s.valorInvestido||s.valorInvestidoFormatado);return u===0&&g>0&&v>0&&(u=g*v),{id:s.idPatrimonio||s.id||0,tickerFormatado:s.ticker||s.tickerFormatado||"",descricaoFormatada:s.descricao||s.descricaoFormatada||"",tipoAtivoFormatado:s.tipoAtivoFormatado||"",moedaFormatada:s.moeda||s.moedaFormatada||"BRL",quantidadeFormatada:g,valorInvestidoFormatado:u,precoMedioFormatado:v,precoAtualFormatado:0,valorAtualFormatado:this.parseFormattedString(s.valorAtual||s.valorAtualFormatado),lucroPrejuizoFormatado:this.parseFormattedString(s.lucroPrejuizo||s.lucroPrejuizoFormatado),moeda:s.moeda||"BRL",category:this.mapTipoAtivoToCategory(s.tipoAtivo,s.tipoAtivoFormatado)}});console.log("Processed AtivosVO:",c);let o=this.convertUsdToBrlNumeric(c,a),d=o.filter(s=>s.category!=="caixa"&&s.tickerFormatado).map(s=>s.tickerFormatado);if(d.length>0){let s=`${this.apiCotacoesPrefix}?tickers=${d.join(",")}`;return this.http.get(s).pipe(f(g=>{let v=new Map(g.map(u=>[u.ticker,{valorCotacao:u.valorCotacao,cambio:u.cambio}]));return o.map(u=>{if(u.category==="caixa")return u;let C=v.get(u.tickerFormatado),z=C?C.cambio==="USD"?C.valorCotacao*a:C.valorCotacao:0,E=u.quantidadeFormatada*z,se=E-u.valorInvestidoFormatado;return ce(U({},u),{precoAtualFormatado:z,valorAtualFormatado:E,lucroPrejuizoFormatado:se})})}),p(g=>(console.error("DashboardService: Error fetching quotes for complete patrimony:",g),l(o.map(v=>ce(U({},v),{precoAtualFormatado:0}))))))}return l(o)}),b(r=>this.store.set(this.PATRIMONIO_COMPLETO_KEY,r)),p(r=>(console.error("DashboardService: Error fetching complete patrimony for user:",r),l([]))))}),V(1))),this.patrimonioCompletoCache$}getPatrimonioHistorico(e){return this.patrimonioHistoricoCache$||(this.patrimonioHistoricoCache$=this.getUsuarioIdObservable().pipe(S(t=>{if(t==null)return console.error("User ID not available for fetching historical patrimony."),l([]);if(t!==e)return console.warn("User ID mismatch: auth ID does not match requested ID."),l([]);let r=`${this.apiUserPatrimonioPrefix}/${e}/historico`;return ne({historico:this.http.get(r).pipe(f(a=>a.map(c=>({idHistorico:c.idHistorico,usuarioId:c.usuarioId,dataRegistro:this.validateDate(c.dataRegistro)??new Date().toISOString(),valorTotal:this.validateNumber(c.valorTotal)??0})).filter(c=>c.dataRegistro!==null&&c.valorTotal!==null)),p(a=>(console.error("DashboardService: Error fetching historical patrimony for user:",a),l([])))),completo:this.getPatrimonioCompleto()}).pipe(f(({historico:a,completo:c})=>!a||a.length===0?(console.warn("No historical data available for user."),[]):a),b(a=>this.store.set(this.PATRIMONIO_HISTORICO_KEY,a)),p(a=>(console.error("DashboardService: Error processing historical patrimony:",a),l([]))),V(1))}))),this.patrimonioHistoricoCache$}getDistribuicaoPatrimonio(){return this.getPatrimonioCompleto().pipe(f(e=>this.calculateDistribuicao(e)),p(e=>(console.error("DashboardService: Error fetching patrimony distribution:",e),l([]))))}calculateDistribuicao(e){if(!e||e.length===0)return[];let t={};e.forEach(o=>{let d=o.category||"outros";t[d]=(t[d]||0)+(o.valorAtualFormatado||0)});let r=Object.entries(t).map(([o,d])=>({tipoAtivo:o.charAt(0).toUpperCase()+o.slice(1),valorTotal:d,percentual:0})),a=r.reduce((o,d)=>o+d.valorTotal,0);return r.map(o=>(o.percentual=a>0?o.valorTotal/a*100:0,o.percentual=Math.round(o.percentual*100)/100,o))}getPatrimonioAcoes(){return this.getPatrimonioCompleto().pipe(f(e=>e.filter(t=>t.category==="acoes")),p(e=>(console.error("DashboardService: Error filtering actions from complete patrimony:",e),l([]))))}getPatrimonioFundos(){return this.getPatrimonioCompleto().pipe(f(e=>e.filter(t=>t.category==="fundos")),p(e=>(console.error("DashboardService: Error filtering funds from complete patrimony:",e),l([]))))}getPatrimonioCaixa(){return this.getPatrimonioCompleto().pipe(f(e=>e.filter(t=>t.category==="caixa")),p(e=>(console.error("DashboardService: Error filtering cash from complete patrimony:",e),l([]))))}getPatrimonioAssets(){return this.getPatrimonioCompleto().pipe(f(e=>e.filter(t=>t.category==="assets")),p(e=>(console.error("DashboardService: Error filtering assets from complete patrimony:",e),l([]))))}getStoredPatrimonioCompleto(){let e=this.store.get(this.PATRIMONIO_COMPLETO_KEY);return Array.isArray(e)?e:[]}getStoredPatrimonioHistorico(){let e=this.store.get(this.PATRIMONIO_HISTORICO_KEY);return Array.isArray(e)?e:[]}getStoredDistribuicaoPatrimonio(){let e=this.getStoredPatrimonioCompleto();return this.calculateDistribuicao(e)}getStoredPatrimonioAcoes(){return this.getStoredPatrimonioCompleto().filter(t=>t.category==="acoes")}getStoredPatrimonioFundos(){return this.getStoredPatrimonioCompleto().filter(t=>t.category==="fundos")}getStoredPatrimonioCaixa(){return this.getStoredPatrimonioCompleto().filter(t=>t.category==="caixa")}getStoredPatrimonioAssets(){return this.getStoredPatrimonioCompleto().filter(t=>t.category==="assets")}deleteAtivo(e,t,r){if(!["fundos","acoes","caixa","assets"].includes(r))return console.error(`Invalid category for deletion: ${r}`),x(()=>new Error("Invalid category"));let a=encodeURIComponent(t),c=`${this.apiUserPatrimonioPrefix}/${e}/${a}`;return this.http.delete(c,{observe:"response"}).pipe(b(o=>{o.status===204?(console.log(`Ticker ${t} deleted successfully from category ${r} (204 No Content).`),this.clearPatrimonioCache()):console.warn(`Unexpected response deleting ticker ${t}: status ${o.status}`)}),f(()=>{}),p(o=>(console.error(`Error deleting ticker ${t} from category ${r}:`,o),x(()=>new Error(`Error deleting ticker: ${o.message||"Unknown error"}`)))))}updateAtivo(e,t,r){if(!["fundos","acoes","caixa","assets","outros"].includes(r))return console.error(`Invalid category for update: ${r}`),x(()=>new Error("Invalid category"));if(!t.tickerFormatado||t.tickerFormatado.trim()==="")return console.error(`Invalid ticker for asset in category ${r}:`,t),x(()=>new Error("Invalid ticker"));let a=encodeURIComponent(t.tickerFormatado),c=`${this.apiUserPatrimonioPrefix}/${e}/${a}`,o={idPatrimonio:typeof t.id=="string"?Number(t.id):t.id||0,descricao:t.descricaoFormatada||"",quantidade:t.quantidadeFormatada||0,precoMedio:t.precoMedioFormatado||0,valorInvestido:t.valorInvestidoFormatado||0,ticker:t.tickerFormatado,usuario:{id:Number(e)||0},tipoAtivo:this.mapCategoryToTipoAtivoNumber(r),moeda:t.moeda||"BRL"};if(o.tipoAtivo===3){let d=typeof t.valorAtualFormatado=="string"?parseFloat(t.valorAtualFormatado.replace(",","."))||0:typeof t.valorAtualFormatado=="number"?t.valorAtualFormatado:0;d>0&&(o.valorAtual=d)}return this.http.put(c,o,{headers:{"Content-Type":"application/json"}}).pipe(b(()=>{console.log(`Asset with ticker ${t.tickerFormatado} updated successfully in category ${r}.`),this.clearPatrimonioCache()}),p(d=>(console.error(`Error updating asset with ticker ${t.tickerFormatado} in category ${r}:`,d),x(()=>new Error(`Error updating asset: ${d.message||"Unknown error"}`)))))}addTransaction(e,t){let r=t.category;return["fundos","acoes","assets","caixa"].includes(r)?(this.clearPatrimonioCache(),l({success:!0})):(console.error(`Invalid category for transaction: ${r}`),x(()=>new Error("Invalid category")))}clearPatrimonioCache(){this.patrimonioCompletoCache$=null,this.cotacaoUSDCache$=null,this.patrimonioHistoricoCache$=null,console.log("DashboardService: Patrimony and historical cache cleared.")}mapTipoAtivoToCategory(e,t){if(e==null)return t&&t.toLowerCase().includes("caixa")?"caixa":"outros";if(typeof e=="number"||!isNaN(Number(e))&&!isNaN(parseFloat(e)))switch(Number(e)){case 1:return"acoes";case 2:return"fundos";case 3:return"caixa";case 4:return"assets";default:return t&&t.toLowerCase().includes("caixa")?"caixa":"outros"}if(typeof e=="string")switch(e.toUpperCase()){case"A\xC7\xC3O":case"A\xC7\xD5ES":return"acoes";case"FII":case"FUNDO":case"FUNDOS":return"fundos";case"CAIXA":return"caixa";case"ASSET":case"ASSETS":return"assets";default:return t&&t.toLowerCase().includes("caixa")?"caixa":"outros"}return t&&t.toLowerCase().includes("caixa")?"caixa":"outros"}mapCategoryToTipoAtivoNumber(e){switch(e.toLowerCase()){case"acoes":return 1;case"fundos":return 2;case"caixa":return 3;case"assets":return 4;default:return 0}}formatDateToDDMMYYYY(e){let t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getFullYear();return`${t}/${r}/${a}`}validateDate(e){if(!e){console.warn(`Invalid date: ${e}`);return}let t=/^(\d{2})\/(\d{2})\/(\d{4})$/,r=e.match(t);if(r){let c=parseInt(r[1],10),o=parseInt(r[2],10)-1,d=parseInt(r[3],10),s=new Date(d,o,c);if(!isNaN(s.getTime())&&s.getDate()===c&&s.getMonth()===o&&s.getFullYear()===d)return e;console.warn(`Invalid date values: ${e}`);return}let a=new Date(e);if(!isNaN(a.getTime()))return this.formatDateToDDMMYYYY(a);console.warn(`Invalid date format: ${e}`)}validateNumber(e){let t=parseFloat(e);if(isNaN(t)){console.warn(`Invalid number format: ${e}`);return}return t}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=M({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var mt=["switch"],ht=["*"];function ut(i,n){i&1&&(w(0,"span",10),q(),w(1,"svg",12),D(2,"path",13),_(),w(3,"svg",14),D(4,"path",15),_()())}var pt=new ge("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),ft={provide:He,useExisting:fe(()=>it),multi:!0},oe=class{source;checked;constructor(n,e){this.source=n,this.checked=e}},it=(()=>{class i{_elementRef=m(ve);_focusMonitor=m(Ee);_changeDetectorRef=m(J);defaults=m(pt);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new oe(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new $;toggleChange=new $;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){m(Ae).load($e);let e=m(new we("tabindex"),{optional:!0}),t=this.defaults,r=m(_e,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=t.color||"accent",this._noopAnimations=r==="NoopAnimations",this.id=this._uniqueId=m(Te).getId("mat-mdc-slide-toggle-"),this.hideIcon=t.hideIcon??!1,this.disabledInteractive=t.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new oe(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Y({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(t&1&&De(mt,5),t&2){let a;xe(a=Se())&&(r._switchElement=a.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(t,r){t&2&&(ye("id",r.id),G("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),K(r.color?"mat-"+r.color:""),O("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",y],color:"color",disabled:[2,"disabled","disabled",y],disableRipple:[2,"disableRipple","disableRipple",y],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Me(e)],checked:[2,"checked","checked",y],hideIcon:[2,"hideIcon","hideIcon",y],disabledInteractive:[2,"disabledInteractive","disabledInteractive",y]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Ce([ft,{provide:Be,useExisting:i,multi:!0}]),H,be],ngContentSelectors:ht,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(t,r){if(t&1){let a=Q();Z(),w(0,"div",1)(1,"button",2,0),N("click",function(){return T(a),P(r._handleClick())}),D(3,"span",3),w(4,"span",4)(5,"span",5)(6,"span",6),D(7,"span",7),_(),w(8,"span",8),D(9,"span",9),_(),B(10,ut,5,0,"span",10),_()()(),w(11,"label",11),N("click",function(o){return T(a),P(o.stopPropagation())}),W(12),_()()}if(t&2){let a=Ie(2);L("labelPosition",r.labelPosition),I(),O("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),L("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),G("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),I(8),L("matRippleTrigger",a)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),I(),X(r.hideIcon?-1:10),I(),L("for",r.buttonId),G("id",r._labelId)}},dependencies:[Le,Oe],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}return i})();var Fr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=A({type:i});static \u0275inj=F({imports:[it,de,de]})}return i})();var gt=["*"];function bt(i,n){if(i&1){let e=Q();w(0,"div",0)(1,"button",1),N("click",function(){T(e);let r=ke();return P(r._onClosed())}),q(),w(2,"svg",2),D(3,"path",3),_()()()}}var wt=(()=>{class i{constructor(){this._changeDetectorRef=m(J),this.type="default",this.dismissible=!1,this.elevation=0,this.closed=new $}get _hostClassList(){return`mtx-alert-${this.type} mat-elevation-z${this.elevation}`}_onClosed(){this._changeDetectorRef.markForCheck(),this.closed.emit(this)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=Y({type:i,selectors:[["mtx-alert"]],hostAttrs:["role","alert",1,"mtx-alert"],hostVars:4,hostBindings:function(t,r){t&2&&(K(r._hostClassList),O("mtx-alert-dismissible",r.dismissible))},inputs:{type:"type",dismissible:[2,"dismissible","dismissible",y],elevation:"elevation"},outputs:{closed:"closed"},exportAs:["mtxAlert"],features:[H],ngContentSelectors:gt,decls:2,vars:1,consts:[[1,"mtx-alert-close"],["mat-icon-button","","type","button","aria-label","Close",3,"click"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"]],template:function(t,r){t&1&&(Z(),W(0),B(1,bt,4,0,"div",0)),t&2&&(I(),X(r.dismissible?1:-1))},dependencies:[Ye],styles:[`.mtx-alert{position:relative;display:block;padding:.75rem 1rem;margin-bottom:1rem;line-height:1.5;border:1px solid var(--mtx-alert-outline-color, var(--mat-sys-outline-variant));border-radius:var(--mtx-alert-container-shape, var(--mat-sys-corner-small));background-color:var(--mtx-alert-background-color, var(--mat-sys-surface-container));color:var(--mtx-alert-text-color, var(--mat-sys-on-surface))}.mtx-alert.mtx-alert-info{border-color:var(--mtx-alert-info-outline-color, light-dark(#abc7ff, #005cbb));background-color:var(--mtx-alert-info-background-color, light-dark(#d7e3ff, #002f65));color:var(--mtx-alert-info-text-color, light-dark(#002f65, #d7e3ff))}.mtx-alert.mtx-alert-success{border-color:var(--mtx-alert-success-outline-color, light-dark(#02e600, #026e00));background-color:var(--mtx-alert-success-background-color, light-dark(#cbffb8, #013a00));color:var(--mtx-alert-success-text-color, light-dark(#013a00, #cbffb8))}.mtx-alert.mtx-alert-warning{border-color:var(--mtx-alert-warning-outline-color, light-dark(#cdcd00, #626200));background-color:var(--mtx-alert-warning-background-color, light-dark(#fffeac, #323200));color:var(--mtx-alert-warning-text-color, light-dark(#323200, #fffeac))}.mtx-alert.mtx-alert-danger{border-color:var(--mtx-alert-danger-outline-color, light-dark(#ffb4a8, #c00100));background-color:var(--mtx-alert-danger-background-color, light-dark(#ffdad4, #690100));color:var(--mtx-alert-danger-text-color, light-dark(#690100, #ffdad4))}.mtx-alert-close{position:absolute;top:0;right:0;display:flex;align-items:center;justify-content:center;width:3rem;height:3rem}[dir=rtl] .mtx-alert-close{right:auto;left:0}.mtx-alert-dismissible{padding-right:3rem}
`],encapsulation:2,changeDetection:0})}}return i})(),jr=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=A({type:i})}static{this.\u0275inj=F({imports:[Fe,wt]})}}return i})();var Qr=(()=>{class i{constructor(){this.http=m(ee),this.authService=m(re),this.storage=m(te),this.apiUsuariosPrefix="/api/usuarios/",this.apiAvatarsPrefix="/api/avatars/",this.aiSettingsUpdated=new pe}getUsuarioIdObservable(){return this.authService.user().pipe(j(1),f(e=>e?.id))}getProfile(){return this.getUsuarioIdObservable().pipe(S(e=>{if(e==null)return console.error("SettingsService: ID do usu\xE1rio n\xE3o dispon\xEDvel para buscar perfil."),l(null);let t=`${this.apiUsuariosPrefix}${e}`;return console.log(`SettingsService: Solicitando perfil para usu\xE1rio ID: ${e} da URL: ${t}`),this.http.get(t).pipe(b(r=>console.log(`SettingsService: Perfil recebido para usu\xE1rio ${e}:`,r)),p(r=>(console.error(`SettingsService: Erro ao buscar perfil para usu\xE1rio ${e}:`,r),l(null))))}))}updateProfile(e){return this.getUsuarioIdObservable().pipe(S(t=>{if(t==null)return console.error("SettingsService: ID do usu\xE1rio n\xE3o dispon\xEDvel para atualizar perfil."),l(null);let r=`${this.apiUsuariosPrefix}${t}`;return console.log(`SettingsService: Enviando atualiza\xE7\xE3o de perfil para usu\xE1rio ID: ${t} da URL: ${r}`),this.http.put(r,e).pipe(b(a=>console.log(`SettingsService: Perfil atualizado com sucesso para usu\xE1rio ${t}:`,a)),p(a=>(console.error(`SettingsService: Erro ao atualizar perfil para usu\xE1rio ${t}:`,a),l(null))))}))}getAISettings(){let e=this.storage.get("ai.provider"),t=this.storage.get("ai.geminiKey")??this.storage.get("ai.key.gemini"),r=this.storage.get("ai.openaiKey")??this.storage.get("ai.key.openai"),a=this.storage.get("ai.backendEndpoint"),c=!!this.storage.get("ai.active.openai"),o=!!this.storage.get("ai.active.gemini");return{provider:e,geminiApiKey:t,openaiApiKey:r,aiBackendEndpoint:a,activeOpenAI:c,activeGemini:o}}updateAISettings(e){return this.storage.set("ai.provider",e.provider??null),this.storage.set("ai.key.gemini",e.geminiApiKey??null),this.storage.set("ai.key.openai",e.openaiApiKey??null),this.storage.set("ai.backendEndpoint",e.aiBackendEndpoint??null),this.storage.set("ai.active.openai",e.activeOpenAI??null),this.storage.set("ai.active.gemini",e.activeGemini??null),this.aiSettingsUpdated.next(),!0}getFullAvatarUrl(e){return e==null?"":`${this.apiAvatarsPrefix}${e}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=M({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{ae as a,Ge as b,Je as c,et as d,nt as e,er as f,lt as g,_t as h,it as i,Fr as j,dr as k,wt as l,jr as m,Qr as n};
