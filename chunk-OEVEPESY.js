import{f as ht,h as Ie,i as Ut,j as Zt,k as Qt}from"./chunk-FWA2Q2J2.js";import{h as Dt,i as Lt,j as Bt,l as Rt,m as zt,o as Nt,p as $t,r as Kt,s as jt,u as Xt,v as Ht,w as Gt,x as Ue,y as qt,z as Wt}from"./chunk-6UURVBGC.js";import"./chunk-SBXJ4IOQ.js";import{i as Yt,j as Jt,l as ei,q as ti}from"./chunk-QVBYFG7P.js";import{c as ii,d as ni}from"./chunk-R4EOBH77.js";import{c as Y,d as J}from"./chunk-3PZ7T22M.js";import{d as Et,f as At,g as kt,h as It}from"./chunk-7BBMVQWW.js";import{a as Tt,b as Ft,e as Vt}from"./chunk-PBP6AEKV.js";import{a as Te,b as Fe}from"./chunk-ZGPE4FIP.js";import{a as Ot,b as St}from"./chunk-JXKX6ARK.js";import{b as bt,d as Ae,e as Ct,f as Pt,h as ke,i as xt,n as Z,o as Q,r as wt,t as Mt,v as T,x as yt}from"./chunk-W5VUDGDP.js";import{Bb as q,Cb as W,Da as _t,Eb as Ce,Gb as O,Ja as D,Jb as Pe,Kb as xe,La as L,Oa as B,Pa as _e,Qb as we,Ta as he,Ua as R,Ub as Me,Vb as ye,_b as vt,ac as Oe,bc as Se,cc as Ee,d as ct,e as U,gc as z,ic as N,ja as ft,k as ge,pa as gt,q as dt,r as pt,s as ut,ub as G,vb as ve,yb as be}from"./chunk-ZPLN4I5Z.js";import{Ac as pe,Bc as lt,Ca as Ye,D as K,Da as Je,Db as ce,Eb as u,F as ae,Gc as h,H as We,Hc as v,Ic as ue,Ja as et,K as j,Kb as ie,Lb as d,Lc as je,Mb as Le,Nb as de,Pb as nt,Pc as H,Ra as tt,Sa as it,Sb as w,Sc as Xe,Tb as Be,Tc as He,Ub as Re,Vb as ze,W as De,Wb as r,Xb as a,Yb as _,Z as $,Zb as E,_b as A,aa as Ze,ac as y,ba as oe,da as Qe,dc as b,fc as c,ga as p,gc as rt,hb as se,hc as at,hd as fe,ic as ot,jb as o,kd as mt,lc as Ne,m as F,mc as $e,nc as Ke,pd as V,q as re,qc as X,ra as P,rb as le,rc as m,sa as x,sc as f,tc as I,uc as st,xb as S,yb as me}from"./chunk-ZR6WDTF5.js";import{a as ne,b as Ve}from"./chunk-4X36HX5K.js";var ai=(()=>{class n{constructor(){this.auth=p(T),this.router=p(pt),this.http=p(U),this.sanitizer=p(ge),this.dashboardService=p(Ut),this.defaultAvatarPlaceholder="images/avatar.jpg",this.apiUrl=Ie.baseUrl,this.avatarObjectUrl=null,this.avatarUrl=this.defaultAvatarPlaceholder,this.isLoadingUser=!0}ngOnInit(){this.auth.user().pipe(j((e,t)=>e.id===t.id),$(e=>{this.user=e,this.loadAvatar(e.id),this.isLoadingUser=!1}),ae(100)).subscribe()}logout(){this.auth.logout().subscribe(()=>{this.dashboardService.clearPatrimonioCache(),this.router.navigateByUrl("/auth/login")})}loadAvatar(e){if(!e){console.warn("ProfileLayoutComponent: No user ID provided for avatar loading"),this.avatarUrl=this.defaultAvatarPlaceholder;return}this.http.get(`${this.apiUrl}/api/avatars/${e}`,{responseType:"blob"}).subscribe({next:t=>{this.avatarObjectUrl&&URL.revokeObjectURL(this.avatarObjectUrl),this.avatarObjectUrl=URL.createObjectURL(t),this.avatarUrl=this.sanitizer.bypassSecurityTrustUrl(this.avatarObjectUrl)},error:t=>{console.warn("ProfileLayoutComponent: Failed to load avatar:",t),t instanceof ct&&t.status===404?this.avatarUrl=this.defaultAvatarPlaceholder:(console.error("ProfileLayoutComponent: An unexpected error occurred while loading avatar."),this.avatarUrl=this.defaultAvatarPlaceholder)}})}ngOnDestroy(){this.avatarObjectUrl&&(URL.revokeObjectURL(this.avatarObjectUrl),this.avatarObjectUrl=null)}onImageError(e){console.warn("ProfileLayoutComponent: Image failed to load:",e.target.src),e.target.src=this.defaultAvatarPlaceholder,this.avatarUrl=this.defaultAvatarPlaceholder}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-profile-layout"]],decls:26,vars:11,consts:[[1,"bg-dark","text-light",3,"title"],[1,"row"],[1,"col-sm-4","col-md-4","col-lg-3"],[1,"text-center"],["alt","user avatar","width","150","height","150",1,"m-b-8","r-full",3,"error","src"],[1,"m-t-0","m-b-8","f-w-400"],[1,"m-t-0","text-grey-500"],[1,"m-t-16","m-b-8"],["mat-list-item","","routerLink","/profile/overview"],["matListItemIcon",""],["mat-list-item","","tabindex","0",3,"click","keydown.enter"],[1,"col-sm-8","col-md-8","col-lg-9"]],template:function(t,i){t&1&&(_(0,"page-header",0),h(1,"translate"),r(2,"div",1)(3,"div",2)(4,"mat-card")(5,"mat-card-content")(6,"div",3)(7,"img",4),b("error",function(g){return i.onImageError(g)}),a(),r(8,"h2",5),m(9),a(),r(10,"p",6),m(11,"Let's make money."),a()(),_(12,"mat-divider",7),r(13,"mat-nav-list")(14,"a",8)(15,"mat-icon",9),m(16,"account_circle"),a(),m(17),h(18,"translate"),a(),r(19,"a",10),b("click",function(){return i.logout()})("keydown.enter",function(){return i.logout()}),r(20,"mat-icon",9),m(21,"exit_to_app"),a(),m(22),h(23,"translate"),a()()()()(),r(24,"div",11),_(25,"router-outlet"),a()()),t&2&&(ot("title",v(1,5,"profile")),o(7),d("src",i.avatarUrl,se),o(2),f(i.user.username),o(8),I(" ",v(18,7,"profile")," "),o(5),I(" ",v(23,9,"logout")," "))},dependencies:[ut,dt,R,B,D,L,St,Ot,It,kt,At,Et,Q,Z,wt,N,z],encapsulation:2})}}return n})();var te=(()=>{class n{constructor(){this.http=p(U),this.authService=p(T),this.storage=p(Mt),this.apiUsuariosPrefix="/api/usuarios/",this.apiAvatarsPrefix="/api/avatars/"}getUsuarioIdObservable(){return this.authService.user().pipe(We(1),re(e=>e?.id))}getProfile(){return this.getUsuarioIdObservable().pipe(De(e=>{if(e==null)return console.error("SettingsService: ID do usu\xE1rio n\xE3o dispon\xEDvel para buscar perfil."),F(null);let t=`${this.apiUsuariosPrefix}${e}`;return console.log(`SettingsService: Solicitando perfil para usu\xE1rio ID: ${e} da URL: ${t}`),this.http.get(t).pipe($(i=>console.log(`SettingsService: Perfil recebido para usu\xE1rio ${e}:`,i)),K(i=>(console.error(`SettingsService: Erro ao buscar perfil para usu\xE1rio ${e}:`,i),F(null))))}))}updateProfile(e){return this.getUsuarioIdObservable().pipe(De(t=>{if(t==null)return console.error("SettingsService: ID do usu\xE1rio n\xE3o dispon\xEDvel para atualizar perfil."),F(null);let i=`${this.apiUsuariosPrefix}${t}`;return console.log(`SettingsService: Enviando atualiza\xE7\xE3o de perfil para usu\xE1rio ID: ${t} da URL: ${i}`),this.http.put(i,e).pipe($(s=>console.log(`SettingsService: Perfil atualizado com sucesso para usu\xE1rio ${t}:`,s)),K(s=>(console.error(`SettingsService: Erro ao atualizar perfil para usu\xE1rio ${t}:`,s),F(null))))}))}getAISettings(){let e=this.storage.get("ai.provider"),t=this.storage.get("ai.geminiKey"),i=this.storage.get("ai.openaiKey"),s=this.storage.get("ai.backendEndpoint");return{provider:e,geminiApiKey:t,openaiApiKey:i,aiBackendEndpoint:s}}updateAISettings(e){return this.storage.set("ai.provider",e.provider??null),this.storage.set("ai.geminiKey",e.geminiApiKey??null),this.storage.set("ai.openaiKey",e.openaiApiKey??null),this.storage.set("ai.backendEndpoint",e.aiBackendEndpoint??null),!0}getFullAvatarUrl(e){return e==null?"":`${this.apiAvatarsPrefix}${e}`}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bi(n,l){if(n&1){let e=y();r(0,"img",20),b("error",function(i){P(e);let s=c();return x(s.onImageError(i))}),a()}if(n&2){let e=c();d("src",e.avatarPreviewUrl,se)}}function Ci(n,l){n&1&&_(0,"mat-spinner",4)}function Pi(n,l){if(n&1&&(r(0,"mat-error",7),m(1),a()),n&2){let e=c();o(),f(e.avatarError)}}function xi(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getErrorMessage("username"))}}function wi(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getErrorMessage("email"))}}function Mi(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getPasswordErrorMessage())}}function yi(n,l){if(n&1&&(r(0,"mat-option",16),m(1),a()),n&2){let e=l.$implicit;d("value",e),o(),f(e)}}function Oi(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getErrorMessage("estrategia"))}}function Si(n,l){if(n&1&&(r(0,"mat-option",16),m(1),a()),n&2){let e=l.$implicit;d("value",e),o(),f(e)}}function Ei(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getErrorMessage("perfil"))}}function Ai(n){let l=n.get("password"),e=n.get("confirmPassword");return!l||!e?null:!l.value&&!e.value?(e.setErrors(null),null):l.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(e.hasError("passwordMismatch")&&e.setErrors(null),null)}var mi=(()=>{class n{constructor(){this.auth=p(T),this.fb=p(Oe),this.settingsService=p(te),this.http=p(U),this.sanitizer=p(ge),this.cdr=p(H),this.selectedFile=null,this.avatarPreviewUrl=null,this.avatarError=null,this.defaultAvatarPlaceholder="images/avatar.jpg",this.avatarObjectUrl=null,this.isLoadingAvatar=!0,this.perfilOptions=["Conservador","Intermedi\xE1rio","Agressivo"],this.estrategiaOptions=["Defensiva","Equilibrado","Ofensiva"],this.passwordVisibility={password:!1,confirmPassword:!1}}ngOnInit(){console.log("ProfileSettingsComponent: Initializing"),this.auth.user().pipe(j((e,t)=>e.id===t.id),$(e=>{console.log("ProfileSettingsComponent: User received",e),this.user=e,this.loadUserData(),this.loadAvatar(e.id)}),ae(100)).subscribe(),this.reactiveForm=this.fb.group({username:this.fb.control("",{validators:[O.required],nonNullable:!0}),email:this.fb.control("",{validators:[O.required,O.email],nonNullable:!0}),password:this.fb.control("",{nonNullable:!0}),confirmPassword:this.fb.control("",{nonNullable:!0}),estrategia:this.fb.control("",{validators:[O.required],nonNullable:!0}),perfil:this.fb.control("",{validators:[O.required],nonNullable:!0}),avatarIdentifier:this.fb.control(void 0),id:this.fb.control(void 0)},{validators:Ai})}loadUserData(){console.log("ProfileSettingsComponent: Loading user data"),this.settingsService.getProfile().subscribe({next:e=>{e?(console.log("ProfileSettingsComponent: Profile data loaded",e),this.reactiveForm.patchValue({username:e.username,email:e.email,estrategia:e.estrategia,perfil:e.perfil,id:e.id,avatarIdentifier:e.avatarIdentifier})):(console.warn("ProfileSettingsComponent: No profile data loaded, using placeholder"),this.avatarPreviewUrl=this.defaultAvatarPlaceholder,this.isLoadingAvatar=!1,this.cdr.detectChanges())},error:e=>{console.error("ProfileSettingsComponent: Error loading profile data:",e),this.avatarPreviewUrl=this.defaultAvatarPlaceholder,this.isLoadingAvatar=!1,this.cdr.detectChanges()}})}loadAvatar(e){if(!e){console.warn("ProfileSettingsComponent: No user ID provided for avatar loading"),this.avatarPreviewUrl=this.defaultAvatarPlaceholder,this.isLoadingAvatar=!1,this.cdr.detectChanges();return}console.log("ProfileSettingsComponent: Fetching avatar for ID:",e);let t=`t=${Date.now()}`;this.http.get(`${Ie.baseUrl}/api/avatars/${e}?${t}`,{responseType:"blob"}).subscribe({next:i=>{console.log("ProfileSettingsComponent: Avatar loaded for ID:",e),this.avatarObjectUrl&&URL.revokeObjectURL(this.avatarObjectUrl),this.avatarObjectUrl=URL.createObjectURL(i),this.avatarPreviewUrl=this.sanitizer.bypassSecurityTrustUrl(this.avatarObjectUrl),this.isLoadingAvatar=!1,this.cdr.detectChanges()},error:i=>{console.warn("ProfileSettingsComponent: Failed to load avatar:",i),i.status===404?(console.log("ProfileSettingsComponent: Avatar not found (404), showing placeholder"),this.avatarPreviewUrl=this.defaultAvatarPlaceholder):(console.error("ProfileSettingsComponent: Unexpected error loading avatar:",i),this.avatarPreviewUrl=this.defaultAvatarPlaceholder),this.isLoadingAvatar=!1,this.cdr.detectChanges()}})}onFileSelected(e){console.log("ProfileSettingsComponent: File selected");let t=e.target;if(t.files&&t.files.length>0){let i=t.files[0];if(this.avatarError=null,!["image/jpeg","image/png"].includes(i.type)){this.avatarError="Apenas arquivos JPEG e PNG s\xE3o permitidos.",this.selectedFile=null,this.avatarPreviewUrl=this.defaultAvatarPlaceholder,t.value="",this.isLoadingAvatar=!1,this.cdr.detectChanges();return}let g=2*1024*1024;if(i.size>g){this.avatarError="O tamanho do arquivo n\xE3o pode exceder 2MB.",this.selectedFile=null,this.avatarPreviewUrl=this.defaultAvatarPlaceholder,t.value="",this.isLoadingAvatar=!1,this.cdr.detectChanges();return}this.selectedFile=i;let C=new FileReader;C.onload=()=>{this.avatarPreviewUrl=C.result,this.isLoadingAvatar=!1,this.cdr.detectChanges()},C.readAsDataURL(i)}else this.selectedFile=null,this.loadAvatar(this.user.id)}getErrorMessage(e){let t=this.reactiveForm.get(e);return!t||!t.touched?"":t.hasError("required")?"Este campo \xE9 obrigat\xF3rio.":t.hasError("email")?"Por favor, insira um e-mail v\xE1lido.":t.hasError("pattern")?"Por favor, insira uma URL v\xE1lida.":t.hasError("minlength")?"Deve ter no m\xEDnimo 20 caracteres.":t.hasError("invalidEndpoint")?"Endpoint inv\xE1lido ou indispon\xEDvel.":""}togglePasswordVisibility(e){this.passwordVisibility[e]=!this.passwordVisibility[e],this.cdr.detectChanges()}getPasswordErrorMessage(){let e=this.reactiveForm.get("confirmPassword");return!e||!e.touched?"":e.hasError("passwordMismatch")?"As senhas n\xE3o coincidem.":""}getAIKeyErrorMessage(e){let t=this.reactiveForm.get(e);return!t||!t.touched?"":t.hasError("required")?"API key \xE9 obrigat\xF3ria.":t.hasError("minlength")?"Deve ter no m\xEDnimo 20 caracteres.":t.hasError("pattern")?"Formato de API key inv\xE1lido.":""}onSubmit(){console.log("ProfileSettingsComponent: Submitting form"),this.reactiveForm.markAllAsTouched();let e=this.reactiveForm.get("password")?.value,t=this.reactiveForm.get("confirmPassword")?.value;if(e&&e.length>0){if(!t||t.length===0){this.reactiveForm.get("confirmPassword")?.setErrors({required:!0}),this.reactiveForm.get("confirmPassword")?.markAsTouched(),console.log("ProfileSettingsComponent: Confirma\xE7\xE3o de senha \xE9 obrigat\xF3ria");return}if(e!==t){this.reactiveForm.get("confirmPassword")?.setErrors({passwordMismatch:!0}),this.reactiveForm.get("confirmPassword")?.markAsTouched(),console.log("ProfileSettingsComponent: As senhas n\xE3o coincidem");return}}else this.reactiveForm.get("confirmPassword")?.setErrors(null);if(this.reactiveForm.invalid&&!this.selectedFile){console.log("ProfileSettingsComponent: Formul\xE1rio inv\xE1lido e nenhum arquivo selecionado");return}let i=new FormData,s=this.reactiveForm.getRawValue();i.append("username",s.username),i.append("email",s.email),i.append("estrategia",s.estrategia),i.append("perfil",s.perfil),s.password&&s.password.length>0&&i.append("password",s.password),this.selectedFile&&i.append("avatar",this.selectedFile,this.selectedFile.name),this.isLoadingAvatar=!0,this.cdr.detectChanges(),this.settingsService.updateProfile(i).subscribe({next:g=>{g?(console.log("ProfileSettingsComponent: Perfil atualizado com sucesso",g),alert("Perfil atualizado com sucesso!"),this.reactiveForm.patchValue({id:g.id,avatarIdentifier:g.avatarIdentifier}),g.id&&this.loadAvatar(g.id)):(console.error("ProfileSettingsComponent: Erro ao atualizar perfil: Resposta nula"),alert("Erro ao atualizar perfil"),this.loadAvatar(this.user.id)),this.selectedFile=null,this.reactiveForm.get("password")?.reset(""),this.reactiveForm.get("confirmPassword")?.reset(""),this.reactiveForm.markAsPristine(),this.reactiveForm.markAsUntouched(),this.cdr.detectChanges()},error:g=>{console.error("ProfileSettingsComponent: Erro ao atualizar perfil:",g),alert("Erro ao atualizar perfil"),this.loadAvatar(this.user.id),this.isLoadingAvatar=!1,this.cdr.detectChanges()}})}onImageError(e){console.warn("ProfileSettingsComponent: Image failed to load:",e.target.src),e.target.src=this.defaultAvatarPlaceholder,this.avatarPreviewUrl=this.defaultAvatarPlaceholder,this.isLoadingAvatar=!1,this.cdr.detectChanges()}ngOnDestroy(){console.log("ProfileSettingsComponent: Destroying"),this.avatarObjectUrl&&(URL.revokeObjectURL(this.avatarObjectUrl),this.avatarObjectUrl=null)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-profile-settings"]],features:[pe([gt(),te])],decls:72,vars:51,consts:[["fileInput",""],[1,"form-field-full",3,"ngSubmit","formGroup"],[1,"avatar-section","m-b-16"],["alt","user avatar","width","130","height","130",1,"m-b-8","r-full",3,"src"],["diameter","40",1,"m-b-8"],["type","file","accept","image/jpeg,image/png",2,"display","none",3,"change"],["mat-stroked-button","","color","primary","type","button",3,"click"],[1,"m-t-8"],[1,"inputs-grid"],[1,"input-cell"],["matInput","","formControlName","username","required","",3,"placeholder"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","password",3,"type","placeholder"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword",3,"type","placeholder"],["formControlName","estrategia","required",""],[3,"value"],["formControlName","perfil","required",""],[1,"save-button-container","m-t-16"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["alt","user avatar","width","130","height","130",1,"m-b-8","r-full",3,"error","src"]],template:function(t,i){if(t&1){let s=y();r(0,"mat-card")(1,"mat-card-content")(2,"form",1),b("ngSubmit",function(){return P(s),x(i.onSubmit())}),r(3,"div",2),u(4,bi,1,1,"img",3)(5,Ci,1,0,"mat-spinner",4),r(6,"input",5,0),b("change",function(C){return P(s),x(i.onFileSelected(C))}),a(),r(8,"button",6),b("click",function(){P(s);let C=X(7);return x(C.click())}),m(9),h(10,"translate"),a(),u(11,Pi,2,1,"mat-error",7),a(),r(12,"div",8)(13,"div",9)(14,"mat-form-field")(15,"mat-label"),m(16),h(17,"translate"),a(),_(18,"input",10),h(19,"translate"),u(20,xi,2,1,"mat-error"),a()(),r(21,"div",9)(22,"mat-form-field")(23,"mat-label"),m(24),h(25,"translate"),a(),_(26,"input",11),h(27,"translate"),u(28,wi,2,1,"mat-error"),a()(),r(29,"div",9)(30,"mat-form-field")(31,"mat-label"),m(32),h(33,"translate"),a(),_(34,"input",12),h(35,"translate"),r(36,"button",13),b("click",function(){return P(s),x(i.togglePasswordVisibility("password"))}),r(37,"mat-icon"),m(38),a()()()(),r(39,"div",9)(40,"mat-form-field")(41,"mat-label"),m(42),h(43,"translate"),a(),_(44,"input",14),h(45,"translate"),r(46,"button",13),b("click",function(){return P(s),x(i.togglePasswordVisibility("confirmPassword"))}),r(47,"mat-icon"),m(48),a()(),u(49,Mi,2,1,"mat-error"),a()(),r(50,"div",9)(51,"mat-form-field")(52,"mat-label"),m(53),h(54,"translate"),a(),r(55,"mat-select",15),Re(56,yi,2,2,"mat-option",16,Be),a(),u(58,Oi,2,1,"mat-error"),a()(),r(59,"div",9)(60,"mat-form-field")(61,"mat-label"),m(62),h(63,"translate"),a(),r(64,"mat-select",17),Re(65,Si,2,2,"mat-option",16,Be),a(),u(67,Ei,2,1,"mat-error"),a()()(),r(68,"div",18)(69,"button",19),m(70),h(71,"translate"),a()()()()()}if(t&2){let s,g,C,k,M;o(2),d("formGroup",i.reactiveForm),o(2),w(i.isLoadingAvatar?5:4),o(5),I(" ",v(10,27,"settings.update_avatar")," "),o(2),w(i.avatarError?11:-1),o(5),f(v(17,29,"settings.fields.name")),o(2),d("placeholder",v(19,31,"settings.placeholders.name")),o(2),w((s=i.reactiveForm.get("username"))!=null&&s.invalid&&((s=i.reactiveForm.get("username"))!=null&&s.touched)?20:-1),o(4),f(v(25,33,"settings.fields.email")),o(2),d("placeholder",v(27,35,"settings.placeholders.email")),o(2),w((g=i.reactiveForm.get("email"))!=null&&g.invalid&&((g=i.reactiveForm.get("email"))!=null&&g.touched)?28:-1),o(4),f(v(33,37,"settings.fields.password")),o(2),d("type",i.passwordVisibility.password?"text":"password")("placeholder",v(35,39,"settings.placeholders.new_password_optional")),o(2),ie("aria-label",i.passwordVisibility.password?"Ocultar senha":"Mostrar senha"),o(2),f(i.passwordVisibility.password?"visibility_off":"visibility"),o(4),f(v(43,41,"settings.fields.confirm_password")),o(2),d("type",i.passwordVisibility.confirmPassword?"text":"password")("placeholder",v(45,43,"settings.placeholders.confirm_password")),o(2),ie("aria-label",i.passwordVisibility.confirmPassword?"Ocultar senha":"Mostrar senha"),o(2),f(i.passwordVisibility.confirmPassword?"visibility_off":"visibility"),o(),w((C=i.reactiveForm.get("confirmPassword"))!=null&&C.invalid&&((C=i.reactiveForm.get("confirmPassword"))!=null&&C.touched)?49:-1),o(4),f(v(54,45,"settings.fields.strategy")),o(3),ze(i.estrategiaOptions),o(2),w((k=i.reactiveForm.get("estrategia"))!=null&&k.invalid&&((k=i.reactiveForm.get("estrategia"))!=null&&k.touched)?58:-1),o(4),f(v(63,47,"settings.fields.profile")),o(3),ze(i.perfilOptions),o(2),w((M=i.reactiveForm.get("perfil"))!=null&&M.invalid&&((M=i.reactiveForm.get("perfil"))!=null&&M.touched)?67:-1),o(2),d("disabled",i.reactiveForm.invalid&&!i.selectedFile),o(),I(" ",v(71,49,"common.save")," ")}},dependencies:[V,Se,we,Ce,Pe,xe,vt,Ee,Me,ye,R,_e,he,B,D,L,W,q,G,ve,be,J,Y,Q,Z,Fe,Te,Ae,bt,_t,N,z],styles:['@charset "UTF-8";.avatar-preview[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover;border:2px solid #ccc;border-radius:40%;box-shadow:0 2px 4px #0000001a}.m-b-8[_ngcontent-%COMP%]{margin-bottom:8px}.m-b-16[_ngcontent-%COMP%]{margin-bottom:16px}.m-t-8[_ngcontent-%COMP%]{margin-top:8px}.m-t-16[_ngcontent-%COMP%]{margin-top:16px}.d-flex[_ngcontent-%COMP%]{display:flex}.flex-column[_ngcontent-%COMP%]{flex-direction:column}.align-items-center[_ngcontent-%COMP%]{align-items:center}.justify-content-center[_ngcontent-%COMP%]{justify-content:center}[_nghost-%COMP%]   .form-grid-row[_ngcontent-%COMP%]{gap:12px 8px}[_nghost-%COMP%]   .form-grid-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   form.form-field-full[_ngcontent-%COMP%]   .form-grid-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}@media (width <= 600px){[_nghost-%COMP%]   form.form-field-full[_ngcontent-%COMP%]   .form-grid-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}}[_nghost-%COMP%]   .avatar-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .save-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .avatar-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .inputs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px 16px}[_nghost-%COMP%]   .inputs-grid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%], .mat-mdc-card[_ngcontent-%COMP%], .mdc-card[_ngcontent-%COMP%], .mat-mdc-card-outlined[_ngcontent-%COMP%], .mdc-card--outlined[_ngcontent-%COMP%]{background:transparent!important;border:none!important;box-shadow:none!important}mat-card[_ngcontent-%COMP%]:hover, .mat-mdc-card[_ngcontent-%COMP%]:hover{box-shadow:none!important;transform:none!important}mat-card-content[_ngcontent-%COMP%], .mat-mdc-card-content[_ngcontent-%COMP%]{background:transparent!important}']})}}return n})();function ki(n,l){n&1&&_(0,"div",2)}var Ii=new Qe("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var di=(()=>{class n{_elementRef=p(et);_ngZone=p(Je);_changeDetectorRef=p(H);_renderer=p(le);_cleanupTransitionEnd;_animationMode=p(it,{optional:!0});constructor(){let e=p(Ii,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=ci(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=ci(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new Ye;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(t,i){t&2&&(ie("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),nt("mat-"+i.color),de("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",He],bufferValue:[2,"bufferValue","bufferValue",He],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[ce],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(t,i){t&1&&(r(0,"div",0),_(1,"div",1),u(2,ki,1,0,"div",2),a(),r(3,"div",3),_(4,"span",4),a(),r(5,"div",5),_(6,"span",4),a()),t&2&&(o(),Le("flex-basis",i._getBufferBarFlexBasis()),o(),w(i.mode==="buffer"?2:-1),o(),Le("transform",i._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}return n})();function ci(n,l=0,e=100){return Math.max(l,Math.min(e,n))}var pi=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=me({type:n});static \u0275inj=oe({imports:[ft]})}return n})();var Ui=["*"];function Ti(n,l){n&1&&_(0,"div",0)}function Fi(n,l){if(n&1&&_(0,"mat-spinner",2),n&2){let e=c(2);d("color",e.color)("strokeWidth",e.strokeWidth)("diameter",e.diameter)("mode",e.mode)("value",e.value)}}function Vi(n,l){if(n&1&&_(0,"mat-progress-bar",3),n&2){let e=c(2);d("color",e.color)("mode",e.mode)("value",e.value)("bufferValue",e.bufferValue)}}function Di(n,l){if(n&1&&(r(0,"div",1),u(1,Fi,1,5,"mat-spinner",2)(2,Vi,1,4,"mat-progress-bar",3),a()),n&2){let e=c();o(),w(e.type==="spinner"?1:-1),o(),w(e.type==="progressbar"?2:-1)}}var Li=(()=>{class n{constructor(){this._changeDetectorRef=p(H),this.type="spinner",this.color="primary",this.mode="indeterminate",this.strokeWidth=4,this.diameter=48,this.bufferValue=0,this.value=0,this.loading=!0,this.hasBackdrop=!0}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=S({type:n,selectors:[["mtx-loader"]],hostAttrs:[1,"mtx-loader"],hostVars:2,hostBindings:function(t,i){t&2&&de("mtx-loader-loading",i.loading)},inputs:{type:"type",color:"color",mode:"mode",strokeWidth:"strokeWidth",diameter:"diameter",bufferValue:"bufferValue",value:"value",loading:[2,"loading","loading",Xe],hasBackdrop:[2,"hasBackdrop","hasBackdrop",Xe]},exportAs:["mtxLoader"],features:[ce],ngContentSelectors:Ui,decls:3,vars:2,consts:[[1,"mtx-loader-backdrop"],[1,"mtx-loader-main"],[3,"color","strokeWidth","diameter","mode","value"],[3,"color","mode","value","bufferValue"]],template:function(t,i){t&1&&(rt(),u(0,Ti,1,0,"div",0)(1,Di,3,2,"div",1),at(2)),t&2&&(w(i.loading&&i.hasBackdrop?0:-1),o(),w(i.loading?1:-1))},dependencies:[Te,di],styles:[`.mtx-loader{position:relative;display:block;width:100%;height:100%}.mtx-loader-main{position:absolute;top:0;left:0;z-index:210;display:flex;justify-content:center;align-items:center;width:100%;height:100%}.mtx-loader-main .mat-mdc-spinner{position:relative}.mtx-loader-main .mat-mdc-progress-bar{position:absolute;top:0;left:0;width:100%}.mtx-loader-backdrop{position:absolute;top:0;left:0;z-index:200;display:block;width:100%;height:100%;content:"";background-color:var(--mtx-loader-backdrop-background-color, color-mix(in srgb, var(--mat-sys-surface) 75%, transparent))}
`],encapsulation:2,changeDetection:0})}}return n})(),ui=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=me({type:n})}static{this.\u0275inj=oe({imports:[V,Fe,pi,Li]})}}return n})();function Ri(n,l){if(n&1&&(r(0,"mtx-alert",17),m(1),a()),n&2){let e=c();o(),st(" Status de chaves: Gemini ",e.hasValidGemini?"v\xE1lida":"ausente"," \xB7 OpenAI ",e.hasValidOpenAI?"v\xE1lida":"ausente"," ")}}function zi(n,l){n&1&&(r(0,"mtx-alert",18),m(1," Nenhuma chave v\xE1lida encontrada. Fa\xE7a login com Gemini ou OpenAI para obter a chave automaticamente ou insira manualmente. "),a())}function Ni(n,l){n&1&&(r(0,"mtx-alert",19),m(1," Autenticando no provedor selecionado... "),a())}function $i(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getAIKeyErrorMessage("geminiApiKey"))}}function Ki(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getAIKeyErrorMessage("openaiApiKey"))}}function ji(n,l){if(n&1&&(r(0,"mat-error"),m(1),a()),n&2){let e=c();o(),f(e.getErrorMessage("aiBackendEndpoint"))}}var fi=(()=>{class n{constructor(){this.fb=p(Oe),this.settingsService=p(te),this.http=p(U),this.auth=p(T),this.aiProviderOptions=["gemini","openai"],this.userId=null,this.llmKeys={},this.hasValidGemini=!1,this.hasValidOpenAI=!1,this.isLoginLoading=!1,this.messageHandler=e=>this.onPopupMessage(e),this.oauthPopup=null}ngOnInit(){this.aiForm=this.fb.group({provider:this.fb.control(null),geminiApiKey:this.fb.control("",{nonNullable:!0}),openaiApiKey:this.fb.control("",{nonNullable:!0}),aiBackendEndpoint:this.fb.control("",{nonNullable:!0,validators:[O.pattern(/^https?:\/\/.+/)]})});let e=this.aiForm.get("provider"),t=this.aiForm.get("geminiApiKey"),i=this.aiForm.get("openaiApiKey"),s=this.aiForm.get("aiBackendEndpoint");e?.valueChanges.pipe(j()).subscribe(k=>{k==="gemini"?(t?.setValidators([O.required,O.minLength(20),O.pattern(/^AIza[0-9A-Za-z-_]{20,40}$/)]),i?.clearValidators(),i?.setValue(i?.value||"")):k==="openai"?(i?.setValidators([O.required,O.minLength(20),O.pattern(/^sk-[A-Za-z0-9-]{20,}$/)]),t?.clearValidators(),t?.setValue(t?.value||"")):(t?.clearValidators(),i?.clearValidators()),t?.updateValueAndValidity({emitEvent:!1}),i?.updateValueAndValidity({emitEvent:!1})}),s?.setAsyncValidators([k=>{let M=k.value||"";if(!M||!/^https?:\/\/.+/.test(M))return F(null);let _i=M.replace(/\/+$/,"");return this.http.get(`${_i}/q/openapi`,{observe:"response"}).pipe(re(hi=>hi.status===200?null:{invalidEndpoint:!0}),K(()=>F({invalidEndpoint:!0})))}]);let g=this.settingsService.getAISettings();this.aiForm.patchValue({provider:g.provider??null,geminiApiKey:g.geminiApiKey??"",openaiApiKey:g.openaiApiKey??"",aiBackendEndpoint:g.aiBackendEndpoint??""}),e?.updateValueAndValidity({emitEvent:!0});let C=this.auth.getCurrentUserValue?.()??null;this.userId=(C&&C.id)??null,window.addEventListener("message",this.messageHandler),this.fetchLlmKeys()}ngOnDestroy(){window.removeEventListener("message",this.messageHandler)}getAIKeyErrorMessage(e){let t=this.aiForm.get(e);return!t||!t.touched?"":t.hasError("required")?"API key \xE9 obrigat\xF3ria.":t.hasError("minlength")?"Deve ter no m\xEDnimo 20 caracteres.":t.hasError("pattern")?"Formato de API key inv\xE1lido.":""}getErrorMessage(e){let t=this.aiForm.get(e);return!t||!t.touched?"":t.hasError("pattern")?"Por favor, insira uma URL v\xE1lida.":t.hasError("invalidEndpoint")?"Endpoint inv\xE1lido ou indispon\xEDvel.":""}onSubmit(){if(this.aiForm.markAllAsTouched(),this.aiForm.invalid)return;let e={provider:this.aiForm.get("provider")?.value??null,geminiApiKey:this.aiForm.get("geminiApiKey")?.value??null,openaiApiKey:this.aiForm.get("openaiApiKey")?.value??null,aiBackendEndpoint:this.aiForm.get("aiBackendEndpoint")?.value??null};this.settingsService.updateAISettings(e),alert("Configura\xE7\xF5es de AI salvas com sucesso!")}openGeminiPortal(){window.open("https://ai.google.dev/gemini-api/docs/api-key","_blank")}openOpenAIPortal(){window.open("https://platform.openai.com/settings/organization/api-keys","_blank")}fetchLlmKeys(){if(!this.userId){this.hasValidGemini=!1,this.hasValidOpenAI=!1;return}this.http.get(`/api/usuarios/${this.userId}/llm/keys`).pipe(K(()=>F(null))).subscribe(e=>{let t=e||{};this.llmKeys={gemini:t?.gemini||"",openai:t?.openai||""},this.hasValidGemini=this.validateKey("gemini",this.llmKeys.gemini||""),this.hasValidOpenAI=this.validateKey("openai",this.llmKeys.openai||""),this.hasValidGemini&&!this.hasValidOpenAI?(this.aiForm.get("provider")?.setValue("gemini"),this.aiForm.get("geminiApiKey")?.setValue(this.llmKeys.gemini||"")):this.hasValidOpenAI&&!this.hasValidGemini&&(this.aiForm.get("provider")?.setValue("openai"),this.aiForm.get("openaiApiKey")?.setValue(this.llmKeys.openai||""))})}validateKey(e,t){return!t||typeof t!="string"?!1:e==="gemini"?/^AIza[0-9A-Za-z-_]{20,40}$/.test(t):e==="openai"?/^sk-[A-Za-z0-9-]{20,}$/.test(t):!1}loginWithProvider(e){let t=(this.aiForm.get("aiBackendEndpoint")?.value||"").trim(),i=t?String(t).replace(/\/+$/,""):"",s=i?`${i}/llm/oauth/${e}?native=true`:`/api/llm/oauth/${e}?native=true`;this.oauthPopup=window.open(s,"llm-oauth","width=600,height=700"),this.isLoginLoading=!0}onPopupMessage(e){try{let t=e.data||{};if(!t||t.type!=="llm-auth")return;let i=t.provider,s=t.apiKey;if(!i||!s||!this.validateKey(i,s))return;i==="gemini"?(this.aiForm.get("provider")?.setValue("gemini"),this.aiForm.get("geminiApiKey")?.setValue(s)):i==="openai"&&(this.aiForm.get("provider")?.setValue("openai"),this.aiForm.get("openaiApiKey")?.setValue(s)),this.settingsService.updateAISettings({provider:this.aiForm.get("provider")?.value??null,geminiApiKey:this.aiForm.get("geminiApiKey")?.value??null,openaiApiKey:this.aiForm.get("openaiApiKey")?.value??null,aiBackendEndpoint:this.aiForm.get("aiBackendEndpoint")?.value??null}),alert("Autentica\xE7\xE3o conclu\xEDda e chave API recebida."),this.oauthPopup&&!this.oauthPopup.closed&&this.oauthPopup.close(),this.fetchLlmKeys(),this.isLoginLoading=!1}catch{this.isLoginLoading=!1}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-ai-settings"]],features:[pe([te])],decls:53,vars:38,consts:[[1,"form-field-full",3,"ngSubmit","formGroup"],[1,"row","form-grid-row"],[1,"col-12"],["type","success","class","m-b-8",4,"ngIf"],["type","warning","class","m-b-8",4,"ngIf"],["type","info","class","m-b-8",4,"ngIf"],[1,"col-12","col-md-6"],["formControlName","provider",3,"items"],[1,"d-flex"],["mat-stroked-button","","color","primary","type","button",3,"click","disabled"],[1,"m-l-8"],["matInput","","type","password","formControlName","geminiApiKey",3,"placeholder"],["matInput","","type","password","formControlName","openaiApiKey",3,"placeholder"],[1,"w-100"],["matInput","","formControlName","aiBackendEndpoint",3,"placeholder"],[1,"save-button-container","m-t-16"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["type","success",1,"m-b-8"],["type","warning",1,"m-b-8"],["type","info",1,"m-b-8"]],template:function(t,i){if(t&1&&(r(0,"mat-card")(1,"mat-card-content")(2,"form",0),b("ngSubmit",function(){return i.onSubmit()}),r(3,"div",1)(4,"div",2)(5,"h3"),m(6),h(7,"translate"),a()(),r(8,"div",2),u(9,Ri,2,2,"mtx-alert",3)(10,zi,2,0,"mtx-alert",4)(11,Ni,2,0,"mtx-alert",5),a(),r(12,"div",6)(13,"mat-form-field")(14,"mat-label"),m(15),h(16,"translate"),a(),_(17,"mtx-select",7),a()(),r(18,"div",6)(19,"div",8)(20,"button",9),b("click",function(){return i.loginWithProvider("gemini")}),m(21," Login no Gemini "),a(),_(22,"span",10),r(23,"button",9),b("click",function(){return i.loginWithProvider("openai")}),m(24," Login no OpenAI "),a()()(),r(25,"div",6)(26,"mat-form-field")(27,"mat-label"),m(28),h(29,"translate"),a(),_(30,"input",11),h(31,"translate"),u(32,$i,2,1,"mat-error"),a()(),r(33,"div",6)(34,"mat-form-field")(35,"mat-label"),m(36),h(37,"translate"),a(),_(38,"input",12),h(39,"translate"),u(40,Ki,2,1,"mat-error"),a()(),r(41,"div",2)(42,"mat-form-field",13)(43,"mat-label"),m(44),h(45,"translate"),a(),_(46,"input",14),h(47,"translate"),u(48,ji,2,1,"mat-error"),a()()(),r(49,"div",15)(50,"button",16),m(51),h(52,"translate"),a()()()()()),t&2){let s,g,C;o(2),d("formGroup",i.aiForm),o(4),f(v(7,20,"settings.ai.title")),o(3),d("ngIf",i.hasValidGemini||i.hasValidOpenAI),o(),d("ngIf",!i.hasValidGemini&&!i.hasValidOpenAI),o(),d("ngIf",i.isLoginLoading),o(4),f(v(16,22,"settings.ai.provider")),o(2),d("items",i.aiProviderOptions),o(3),d("disabled",i.isLoginLoading),o(3),d("disabled",i.isLoginLoading),o(5),f(v(29,24,"settings.ai.gemini_api_key")),o(2),d("placeholder",v(31,26,"settings.ai.placeholders.gemini_api_key")),o(2),w((s=i.aiForm.get("geminiApiKey"))!=null&&s.invalid&&((s=i.aiForm.get("geminiApiKey"))!=null&&s.touched)?32:-1),o(4),f(v(37,28,"settings.ai.openai_api_key")),o(2),d("placeholder",v(39,30,"settings.ai.placeholders.openai_api_key")),o(2),w((g=i.aiForm.get("openaiApiKey"))!=null&&g.invalid&&((g=i.aiForm.get("openaiApiKey"))!=null&&g.touched)?40:-1),o(4),f(v(45,32,"settings.ai.backend_endpoint")),o(2),d("placeholder",v(47,34,"settings.ai.placeholders.backend_endpoint")),o(2),w((C=i.aiForm.get("aiBackendEndpoint"))!=null&&C.invalid&&((C=i.aiForm.get("aiBackendEndpoint"))!=null&&C.touched)?48:-1),o(2),d("disabled",i.aiForm.invalid),o(),I(" ",v(52,36,"common.save")," ")}},dependencies:[V,fe,Se,we,Ce,Pe,xe,Ee,Me,ye,B,D,L,W,q,G,ve,J,Y,Ae,R,_e,N,z,Qt,Zt,ui,ni,ii],styles:[".save-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}mat-card[_ngcontent-%COMP%], .mat-mdc-card[_ngcontent-%COMP%], .mdc-card[_ngcontent-%COMP%], .mat-mdc-card-outlined[_ngcontent-%COMP%], .mdc-card--outlined[_ngcontent-%COMP%]{background:transparent!important;border:none!important;box-shadow:none!important}mat-card-content[_ngcontent-%COMP%], .mat-mdc-card-content[_ngcontent-%COMP%]{background:transparent!important}"]})}}return n})();var Xi=()=>[5];function Hi(n,l){n&1&&(r(0,"th",31),m(1,"ID"),a())}function Gi(n,l){if(n&1&&(r(0,"td",32),m(1),a()),n&2){let e=l.$implicit;o(),f(e.id)}}function qi(n,l){n&1&&(r(0,"th",31),m(1,"Username"),a())}function Wi(n,l){if(n&1){let e=y();r(0,"input",35),b("input",function(i){P(e);let s=c(3);return x(s.onEditField("username",i.target.value))}),a()}if(n&2){let e,t=c(3);d("value",(e=t.editingUser==null?null:t.editingUser.username)!==null&&e!==void 0?e:"")}}function Zi(n,l){if(n&1&&(r(0,"span"),m(1),a()),n&2){let e=c().$implicit;o(),f(e.username)}}function Qi(n,l){if(n&1&&(r(0,"td",32),u(1,Wi,1,1,"input",33)(2,Zi,2,1,"span",34),a()),n&2){let e=l.$implicit,t=c(2);o(),d("ngIf",(t.editingUser==null?null:t.editingUser.id)===e.id),o(),d("ngIf",(t.editingUser==null?null:t.editingUser.id)!==e.id)}}function Yi(n,l){n&1&&(r(0,"th",31),m(1,"Email"),a())}function Ji(n,l){if(n&1){let e=y();r(0,"input",35),b("input",function(i){P(e);let s=c(3);return x(s.onEditField("email",i.target.value))}),a()}if(n&2){let e,t=c(3);d("value",(e=t.editingUser==null?null:t.editingUser.email)!==null&&e!==void 0?e:"")}}function en(n,l){if(n&1&&(r(0,"span"),m(1),a()),n&2){let e=c().$implicit;o(),f(e.email)}}function tn(n,l){if(n&1&&(r(0,"td",32),u(1,Ji,1,1,"input",33)(2,en,2,1,"span",34),a()),n&2){let e=l.$implicit,t=c(2);o(),d("ngIf",(t.editingUser==null?null:t.editingUser.id)===e.id),o(),d("ngIf",(t.editingUser==null?null:t.editingUser.id)!==e.id)}}function nn(n,l){n&1&&(r(0,"th",31),m(1,"Roles"),a())}function rn(n,l){if(n&1&&(r(0,"td",32),m(1),a()),n&2){let e=l.$implicit,t=c(2);o(),f(t.formatRoles(e.roles))}}function an(n,l){n&1&&(r(0,"th",31),m(1,"\xDAltimo login"),a())}function on(n,l){if(n&1&&(r(0,"td",32),m(1),h(2,"date"),a()),n&2){let e=l.$implicit;o(),f(e.lastLogin?ue(2,1,e.lastLogin,"dd/MM/yyyy HH:mm"):"\u2014")}}function sn(n,l){n&1&&(r(0,"th",31),m(1,"Data de cadastro"),a())}function ln(n,l){if(n&1&&(r(0,"td",32),m(1),h(2,"date"),a()),n&2){let e=l.$implicit;o(),f(e.createdAt?ue(2,1,e.createdAt,"dd/MM/yyyy HH:mm"):"\u2014")}}function mn(n,l){n&1&&(r(0,"th",31),m(1,"Premium expira"),a())}function cn(n,l){if(n&1&&(E(0),m(1),h(2,"date"),A()),n&2){let e=c().$implicit;o(),I(" ",e.premiumUntil?ue(2,1,e.premiumUntil,"dd/MM/yyyy"):"\u2014"," ")}}function dn(n,l){if(n&1){let e=y();r(0,"div",37)(1,"mat-form-field",38)(2,"input",39),b("dateChange",function(i){P(e);let s=c(3);return x(s.premiumUntilInput=i.value)}),a(),_(3,"mat-datepicker-toggle",40)(4,"mat-datepicker",null,1),a(),r(6,"div",41)(7,"button",42),b("click",function(){P(e);let i=c().$implicit,s=c(2);return x(s.confirmActivatePremium(i))}),r(8,"mat-icon"),m(9,"save"),a()(),r(10,"button",43),b("click",function(){P(e);let i=c(3);return x(i.cancelActivatePremium())}),r(11,"mat-icon"),m(12,"close"),a()()()()}if(n&2){let e=X(5),t=c(3);o(2),d("matDatepicker",e)("value",t.premiumUntilInput),o(),d("for",e)}}function pn(n,l){if(n&1&&(r(0,"td",32),u(1,cn,3,4,"ng-container",36)(2,dn,13,3,"ng-template",null,0,je),a()),n&2){let e=l.$implicit,t=X(3),i=c(2);o(),d("ngIf",i.premiumActivationId!==e.id)("ngIfElse",t)}}function un(n,l){n&1&&(r(0,"th",44),m(1,"Premium"),a())}function fn(n,l){if(n&1){let e=y();E(0),r(1,"div",45)(2,"button",46),b("click",function(){P(e);let i=c().$implicit,s=c(2);return x(s.startActivatePremium(i))}),r(3,"mat-icon"),m(4,"verified"),a()(),r(5,"button",47),b("click",function(){P(e);let i=c().$implicit,s=c(2);return x(s.deactivatePremium(i))}),r(6,"mat-icon"),m(7,"block"),a()()(),A()}}function gn(n,l){}function _n(n,l){if(n&1&&(r(0,"td",32),u(1,fn,8,0,"ng-container",36)(2,gn,0,0,"ng-template",null,2,je),a()),n&2){let e=l.$implicit,t=X(3),i=c(2);o(),d("ngIf",i.premiumActivationId!==e.id)("ngIfElse",t)}}function hn(n,l){n&1&&(r(0,"th",44),m(1,"A\xE7\xF5es"),a())}function vn(n,l){if(n&1){let e=y();r(0,"button",53),b("click",function(){P(e);let i=c().$implicit,s=c(2);return x(s.startEdit(i))}),r(1,"mat-icon"),m(2,"edit"),a()()}}function bn(n,l){if(n&1){let e=y();r(0,"button",54),b("click",function(){P(e);let i=c(3);return x(i.saveEdit())}),r(1,"mat-icon"),m(2,"save"),a()()}}function Cn(n,l){if(n&1){let e=y();r(0,"button",55),b("click",function(){P(e);let i=c(3);return x(i.cancelEdit())}),r(1,"mat-icon"),m(2,"close"),a()()}}function Pn(n,l){if(n&1){let e=y();r(0,"button",56),b("click",function(){P(e);let i=c().$implicit,s=c(2);return x(s.deleteUser(i))}),r(1,"mat-icon"),m(2,"delete"),a()()}}function xn(n,l){if(n&1){let e=y();r(0,"td",32),u(1,vn,3,0,"button",48)(2,bn,3,0,"button",49)(3,Cn,3,0,"button",50),r(4,"button",51),b("click",function(){let i=P(e).$implicit,s=c(2);return x(s.resetPassword(i))}),r(5,"mat-icon"),m(6,"vpn_key"),a()(),u(7,Pn,3,0,"button",52),a()}if(n&2){let e=l.$implicit,t=c(2);o(),d("ngIf",(t.editingUser==null?null:t.editingUser.id)!==e.id),o(),d("ngIf",(t.editingUser==null?null:t.editingUser.id)===e.id),o(),d("ngIf",(t.editingUser==null?null:t.editingUser.id)===e.id),o(4),d("ngIf",(t.editingUser==null?null:t.editingUser.id)!==e.id)}}function wn(n,l){n&1&&_(0,"tr",57)}function Mn(n,l){n&1&&_(0,"tr",58)}function yn(n,l){if(n&1){let e=y();r(0,"mat-tab",9)(1,"div",6)(2,"mat-card",10)(3,"mat-card-content")(4,"div",11)(5,"mat-form-field",12)(6,"mat-label"),m(7,"Buscar usu\xE1rios"),a(),r(8,"input",13),b("keyup",function(i){P(e);let s=c();return x(s.applyFilter(i.target.value))}),a()()(),r(9,"div",14)(10,"table",15),E(11,16),u(12,Hi,2,0,"th",17)(13,Gi,2,1,"td",18),A(),E(14,19),u(15,qi,2,0,"th",17)(16,Qi,3,2,"td",18),A(),E(17,20),u(18,Yi,2,0,"th",17)(19,tn,3,2,"td",18),A(),E(20,21),u(21,nn,2,0,"th",17)(22,rn,2,1,"td",18),A(),E(23,22),u(24,an,2,0,"th",17)(25,on,3,4,"td",18),A(),E(26,23),u(27,sn,2,0,"th",17)(28,ln,3,4,"td",18),A(),E(29,24),u(30,mn,2,0,"th",17)(31,pn,4,2,"td",18),A(),E(32,25),u(33,un,2,0,"th",26)(34,_n,4,2,"td",18),A(),E(35,27),u(36,hn,2,0,"th",26)(37,xn,8,4,"td",18),A(),u(38,wn,1,0,"tr",28)(39,Mn,1,0,"tr",29),a()(),_(40,"mat-paginator",30),a()()()()}if(n&2){let e=c();o(8),d("value",e.searchValue),o(2),d("dataSource",e.usersDataSource),o(28),d("matHeaderRowDef",e.displayedColumns),o(),d("matRowDefColumns",e.displayedColumns),o(),d("pageSize",5)("pageSizeOptions",lt(6,Xi))}}var gi=(()=>{class n{constructor(){this.authService=p(T),this.platformId=p(tt),this.renderer=p(le),this.settings=p(yt),this.http=p(U),this.usersDataSource=new Gt([]),this.displayedColumns=["id","username","email","roles","lastLogin","createdAt","premiumUntil","premium","actions"],this.editingUser=null,this.selectedUserId=null,this.searchValue="",this.pageSize=5,this.totalUsers=0,this.loadingUsers=!1,this.pageIndex=0,this.sortActive="",this.sortDirection="",this.premiumActivationId=null,this.premiumUntilInput=null}ngOnInit(){this.isAdmin&&(this.usersDataSource.filterPredicate=(e,t)=>{let i=(t||"").toLowerCase(),s=String(e?.id??"").toLowerCase(),g=String(e?.username??"").toLowerCase(),C=String(e?.email??"").toLowerCase(),k=Array.isArray(e?.roles)?e.roles.map(M=>String(typeof M=="string"?M:M?.name??M?.role??M?.id??"")).join(",").toLowerCase():String(e?.roles??"").toLowerCase();return s.includes(i)||g.includes(i)||C.includes(i)||k.includes(i)},this.loadAllUsers())}ngAfterViewInit(){this.isAdmin&&(this.usersDataSource.paginator=this.paginator,this.usersDataSource.sort=this.sort)}ngOnDestroy(){}get isAdmin(){let t=this.authService.getCurrentUserValue()?.roles;return!t||!Array.isArray(t)?!1:t.some(i=>{if(typeof i=="string")return i.toUpperCase()==="ADMIN";let s=i?.name||i?.role||i?.id||"";return String(s).toUpperCase()==="ADMIN"})}formatRoles(e){if(e==null)return"";if(Array.isArray(e))return e.map(t=>{let i=typeof t=="string"?t:t?.name??t?.role??t?.id??"";return String(i)}).filter(t=>t&&t.length>0).join(", ");if(typeof e=="string")return e;if(typeof e=="object"){let t=e?.name??e?.role??e?.id??"";return String(t)}return String(e)}startEdit(e){this.editingUser=ne({},e)}cancelEdit(){this.editingUser=null}onEditField(e,t){this.editingUser&&(this.editingUser[e]=t)}saveEdit(){if(!this.editingUser||!this.editingUser.id)return;let e=this.editingUser.id;this.http.put(`/api/usuarios/${e}`,this.editingUser).subscribe({next:t=>{let i=this.usersDataSource.data.map(s=>s.id===e?t:s);this.usersDataSource.data=i,this.editingUser=null},error:t=>{console.error("Erro ao atualizar usu\xE1rio",t)}})}activatePremium(e){if(!e?.id)return;let t=e.id;this.http.post(`/api/usuarios/${t}/assinatura/premium/ativar`,{}).subscribe({next:()=>{this.isAdmin?this.loadAllUsers():this.loadCurrentUser()},error:i=>{console.error("Erro ao ativar premium",i)}})}deactivatePremium(e){if(!e?.id)return;let t=e.id;this.http.post(`/api/usuarios/${t}/assinatura/premium/desativar`,{}).subscribe({next:()=>{this.isAdmin?this.loadAllUsers():this.loadCurrentUser()},error:i=>{console.error("Erro ao desativar premium",i)}})}startActivatePremium(e){this.premiumActivationId=e?.id??null,this.premiumUntilInput=e?.premiumUntil?new Date(e.premiumUntil):null}cancelActivatePremium(){this.premiumActivationId=null,this.premiumUntilInput=null}confirmActivatePremium(e){if(!e?.id)return;let t=e.id,i={};this.premiumUntilInput instanceof Date&&!isNaN(this.premiumUntilInput.getTime())&&(i.premiumUntil=this.premiumUntilInput.toISOString()),this.http.post(`/api/usuarios/${t}/assinatura/premium/ativar`,i).subscribe({next:()=>{this.premiumActivationId=null,this.premiumUntilInput=null,i.premiumUntil&&(this.usersDataSource.data=this.usersDataSource.data.map(s=>s.id===t?Ve(ne({},s),{premiumUntil:new Date(i.premiumUntil)}):s)),this.isAdmin?this.loadAllUsers():this.loadCurrentUser()},error:s=>{console.error("Erro ao ativar premium",s)}})}normalizeUser(e){let t=i=>{if(!i)return null;if(i instanceof Date)return isNaN(i.getTime())?null:i;if(typeof i=="string"||typeof i=="number"){let s=new Date(i);return isNaN(s.getTime())?null:s}return null};return Ve(ne({},e),{createdAt:t(e?.createdAt),lastLogin:t(e?.lastLogin),premiumUntil:t(e?.premiumUntil)})}deleteUser(e){if(!e||!e.id)return;let t=e.id;this.http.delete(`/api/usuarios/${t}`).subscribe({next:()=>{this.usersDataSource.data=this.usersDataSource.data.filter(i=>i.id!==t),this.totalUsers=this.usersDataSource.data.length},error:i=>{console.error("Erro ao excluir usu\xE1rio",i)}})}applyFilter(e){this.searchValue=e,this.usersDataSource.filter=(e||"").trim().toLowerCase()}loadCurrentUser(){this.loadingUsers=!0;let t=this.authService.getCurrentUserValue()?.id;if(t==null){this.usersDataSource.data=[],this.totalUsers=0,this.loadingUsers=!1;return}this.http.get(`/api/usuarios/${t}`).subscribe({next:i=>{let s=i?[this.normalizeUser(i)]:[];this.usersDataSource.data=s,this.totalUsers=this.usersDataSource.data.length,this.loadingUsers=!1,this.paginator&&(this.paginator.pageSize=this.pageSize,this.paginator.firstPage())},error:()=>{this.usersDataSource.data=[],this.totalUsers=0,this.loadingUsers=!1}})}loadAllUsers(){this.loadingUsers=!0,this.http.get("/api/usuarios").subscribe({next:e=>{let t=Array.isArray(e)?e.map(i=>this.normalizeUser(i)):[];this.usersDataSource.data=t,this.totalUsers=this.usersDataSource.data.length,this.loadingUsers=!1,this.paginator&&(this.paginator.pageSize=this.pageSize,this.paginator.firstPage())},error:()=>{this.usersDataSource.data=[],this.totalUsers=0,this.loadingUsers=!1}})}resetPassword(e){e?.id&&this.http.post("/api/usuarios/resetar-senha",{id:e.id}).subscribe({next:()=>{console.log("Senha resetada para usu\xE1rio",e.id)},error:t=>{console.error("Erro ao resetar senha",t)}})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-profile-overview"]],viewQuery:function(t,i){if(t&1&&(Ne(ke,5),Ne(Ue,5)),t&2){let s;$e(s=Ke())&&(i.paginator=s.first),$e(s=Ke())&&(i.sort=s.first)}},decls:10,vars:4,consts:[["premiumUntilEditTpl",""],["pickerPremiumUntil",""],["premiumEditingTpl",""],[1,"profile-overview"],["dynamicHeight","",1,"futuristic-tabs"],[3,"label"],[1,"tab-content"],["label","AI Settings"],["label","Administrador",4,"ngIf"],["label","Administrador"],[1,"table-card"],[1,"admin-controls","d-flex","align-items-center"],["appearance","outline",1,"user-search-field"],["matInput","","placeholder","Nome, e-mail, ID, role",3,"keyup","value"],[1,"user-table-wrapper"],["mat-table","","matSort","",1,"mat-elevation-z1","w-100","user-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","roles"],["matColumnDef","lastLogin"],["matColumnDef","createdAt"],["matColumnDef","premiumUntil"],["matColumnDef","premium"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"m-t-8",3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matInput","",3,"value","input",4,"ngIf"],[4,"ngIf"],["matInput","",3,"input","value"],[4,"ngIf","ngIfElse"],[1,"premium-until-edit"],["appearance","outline",1,"premium-until-field"],["matInput","",3,"dateChange","matDatepicker","value"],["matSuffix","",3,"for"],[1,"premium-until-actions"],["mat-icon-button","","color","primary","matTooltip","Salvar","aria-label","Salvar",3,"click"],["mat-icon-button","","matTooltip","Cancelar","aria-label","Cancelar",3,"click"],["mat-header-cell",""],[1,"premium-actions"],["mat-icon-button","","color","primary","matTooltip","Ativar Premium","aria-label","Ativar Premium",3,"click"],["mat-icon-button","","color","warn","matTooltip","Desativar Premium","aria-label","Desativar Premium",3,"click"],["mat-icon-button","","color","primary","aria-label","Editar",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","aria-label","Salvar",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Cancelar",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Resetar senha","aria-label","Resetar senha",3,"click"],["mat-icon-button","","color","warn","aria-label","Excluir",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","aria-label","Editar",3,"click"],["mat-icon-button","","color","primary","aria-label","Salvar",3,"click"],["mat-icon-button","","aria-label","Cancelar",3,"click"],["mat-icon-button","","color","warn","aria-label","Excluir",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){t&1&&(r(0,"div",3)(1,"mat-tab-group",4)(2,"mat-tab",5),h(3,"translate"),r(4,"div",6),_(5,"app-profile-settings"),a()(),r(6,"mat-tab",7)(7,"div",6),_(8,"app-ai-settings"),a()(),u(9,yn,41,7,"mat-tab",8),a()()),t&2&&(o(2),d("label",v(3,2,"edit_profile")),o(7),d("ngIf",i.isAdmin))},dependencies:[V,fe,mt,B,D,L,Vt,Tt,Ft,Q,Z,R,he,Pt,Ct,mi,fi,N,z,Ht,Dt,Bt,$t,Rt,Lt,Kt,zt,Nt,jt,Xt,xt,ke,Wt,Ue,qt,W,q,G,be,J,Y,ti,Yt,Jt,ei,ht],styles:["[_nghost-%COMP%]{display:block}.tab-content[_ngcontent-%COMP%]{padding:var(--gutter)}.tradingview-widget-container__widget[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:var(--mat-sys-corner-medium);background:transparent!important}button[mat-icon-button][_ngcontent-%COMP%]   mat-icon.spin-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.profile-overview[_ngcontent-%COMP%]{padding:var(--gutter);border:1px solid var(--mat-sys-outline);border-radius:var(--mat-sys-corner-medium);background:transparent}.theme-dark[_ngcontent-%COMP%]   .profile-overview[_ngcontent-%COMP%]{background-color:#0f0f0f!important}.profile-overview[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   mat-card.mat-mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .mat-mdc-card.mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .mat-mdc-card-outlined[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .mdc-card--outlined[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]{background-color:transparent!important;border-radius:var(--mat-sys-corner-medium)!important;box-shadow:none!important}.profile-overview[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{background:transparent!important}.profile-overview[_ngcontent-%COMP%]   app-profile-settings[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-profile-settings[_ngcontent-%COMP%]   mat-card.mat-mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-profile-settings[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-profile-settings[_ngcontent-%COMP%]   .mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-profile-settings[_ngcontent-%COMP%]   .mat-mdc-card-outlined[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-profile-settings[_ngcontent-%COMP%]   .mdc-card--outlined[_ngcontent-%COMP%]{background:transparent!important;border:none!important;box-shadow:none!important}.profile-overview[_ngcontent-%COMP%]   app-ai-settings[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-ai-settings[_ngcontent-%COMP%]   mat-card.mat-mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-ai-settings[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-ai-settings[_ngcontent-%COMP%]   .mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-ai-settings[_ngcontent-%COMP%]   .mat-mdc-card-outlined[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   app-ai-settings[_ngcontent-%COMP%]   .mdc-card--outlined[_ngcontent-%COMP%]{background:transparent!important;border:none!important;box-shadow:none!important}.profile-overview[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{background:transparent!important}.profile-overview[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{width:100%}.profile-overview[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .table-card.mat-mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .table-card.mdc-card[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .table-card.mat-mdc-card-outlined[_ngcontent-%COMP%], .profile-overview[_ngcontent-%COMP%]   .table-card.mdc-card--outlined[_ngcontent-%COMP%]{background:transparent!important;border:none!important;box-shadow:none!important}.tradingview-widget-container[_ngcontent-%COMP%]{width:100%;height:450px;overflow:hidden;background:transparent}.tradingview-widget-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{background:transparent!important;width:100%!important;max-width:100%!important;display:block!important}.tradingview-widget-container[_ngcontent-%COMP%], .tradingview-widget-container__widget[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;display:block!important;box-sizing:border-box}.theme-dark[_ngcontent-%COMP%]   .profile-overview[_ngcontent-%COMP%]   .tradingview-widget-container[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .profile-overview[_ngcontent-%COMP%]   .tradingview-widget-container__widget[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .profile-overview[_ngcontent-%COMP%]   .tradingview-widget-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{background:transparent!important}.spin-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.admin-controls[_ngcontent-%COMP%]{gap:12px;margin-bottom:12px}.user-search-field[_ngcontent-%COMP%]{width:100%;max-width:320px}.premium-inputs[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-start;flex-wrap:wrap}.premium-date-field[_ngcontent-%COMP%]{width:100%;min-width:200px;max-width:280px;flex:1 1 240px}.premium-until-edit[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-start;flex-wrap:wrap}.premium-until-field[_ngcontent-%COMP%]{width:100%;min-width:240px;max-width:320px;flex:1 1 260px}.premium-until-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.premium-actions[_ngcontent-%COMP%]{display:flex;gap:6px;align-items:center}.news-actions[_ngcontent-%COMP%]{margin-top:8px}.futuristic-tabs[_ngcontent-%COMP%]   .mat-tab-labels[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.futuristic-tabs[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]{min-width:unset;padding:8px 12px;font-size:.9rem;font-weight:500;color:var(--mat-sys-on-surface-variant);transition:color .3s ease}.futuristic-tabs[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]:hover{color:var(--mat-sys-primary)}.futuristic-tabs[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-label-active[_ngcontent-%COMP%]{font-weight:600;color:var(--mat-sys-primary)}.futuristic-tabs[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%]{margin-bottom:12px;border-bottom:2px solid var(--mat-sys-outline)}.futuristic-tabs[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{height:3px;background-color:var(--mat-sys-primary);border-radius:2px}table.mat-mdc-table[_ngcontent-%COMP%]{width:100%}.user-table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.user-table[_ngcontent-%COMP%]{table-layout:fixed}.user-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:8px 12px;font-size:.78rem;line-height:1.35;word-break:break-word;overflow-wrap:anywhere}.user-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{height:auto}.user-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{align-items:flex-start;overflow:visible}.mat-column-premium[_ngcontent-%COMP%]{min-width:240px}.mat-column-premiumUntil[_ngcontent-%COMP%]{min-width:280px}.mat-column-username[_ngcontent-%COMP%]{min-width:120px}.mat-column-email[_ngcontent-%COMP%]{min-width:200px}.mat-column-roles[_ngcontent-%COMP%], .mat-column-lastLogin[_ngcontent-%COMP%], .mat-column-createdAt[_ngcontent-%COMP%]{min-width:160px}.mat-column-premiumUntil[_ngcontent-%COMP%]{min-width:220px}.mat-column-actions[_ngcontent-%COMP%]{width:140px}@media (width <= 900px){.user-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:6px 10px;font-size:.76rem}.mat-column-email[_ngcontent-%COMP%]{min-width:180px}.mat-column-roles[_ngcontent-%COMP%]{min-width:140px}}@media (width <= 600px){.premium-until-edit[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.user-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:5px 8px;font-size:.74rem}.mat-column-email[_ngcontent-%COMP%]{min-width:160px}.mat-column-roles[_ngcontent-%COMP%]{min-width:120px}.mat-column-actions[_ngcontent-%COMP%]{width:128px}}"]})}}return n})();var za=[{path:"",component:ai,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:gi}]}];export{za as routes};
