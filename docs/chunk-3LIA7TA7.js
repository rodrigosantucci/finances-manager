import{$b as lt,Nb as b,Pb as ot,Sb as at,Tb as P,Vb as k,h as it,ic as se,ka as me}from"./chunk-VUY25QKU.js";import{A as Re,Ab as X,B as le,Bb as $,Cb as Le,Da as Ne,Db as J,Ea as Se,Ec as Ze,Fa as Ye,G as Te,Gb as de,I as je,Ka as pe,Kc as Xe,L as Ve,Lc as Je,Nb as L,Oc as et,Pc as te,Rb as We,Sc as tt,W as ue,X as he,_ as Pe,ac as ee,ba as N,c as Ie,ca as z,dd as rt,ea as K,f as Ae,ga as E,ha as Ge,hb as $e,hc as Be,jd as st,kc as Ue,lc as Qe,m as M,mb as d,md as nt,o as v,oc as qe,pb as S,pc as W,q as ae,qa as Z,qb as Y,qc as j,ra as R,rc as V,sd as re,tb as fe,ub as w,vc as ze,wa as ce,wc as Ke,ya as He,zb as T}from"./chunk-MCXTPL5A.js";import{a as m,b as H,c as ke,d as q}from"./chunk-4X36HX5K.js";var vt=Math.pow(10,8)*24*60*60*1e3,Wt=-vt,Bt=6048e5,Ut=864e5,Qt=6e4,qt=36e5,zt=1e3;var _t=3600;var ut=_t*24,Kt=ut*7,xt=ut*365.2425,Dt=xt/12,Zt=Dt*3,ge=Symbol.for("constructDateFrom");function F(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&ge in s?s[ge](t):s instanceof Date?new s.constructor(t):new Date(t)}function x(s,t){return F(t||s,s)}function ir(s,t,e){let r=x(s,e?.in);return isNaN(t)?F(e?.in||s,NaN):(t&&r.setDate(r.getDate()+t),r)}function ht(s,t){let e=x(s,t?.in),r=e.getFullYear(),n=e.getMonth(),i=F(e,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function ct(s,t,e){let r=x(s,e?.in),n=r.getFullYear(),i=r.getDate(),o=F(e?.in||s,0);o.setFullYear(n,t,15),o.setHours(0,0,0,0);let a=ht(o);return r.setMonth(t,Math.min(i,a)),r}function yr(s,t,e){let r=x(s,e?.in);return isNaN(+r)?F(e?.in||s,NaN):(t.year!=null&&r.setFullYear(t.year),t.month!=null&&(r=ct(r,t.month)),t.date!=null&&r.setDate(t.date),t.hours!=null&&r.setHours(t.hours),t.minutes!=null&&r.setMinutes(t.minutes),t.seconds!=null&&r.setSeconds(t.seconds),t.milliseconds!=null&&r.setMilliseconds(t.milliseconds),r)}var Mt=["container"];function Et(s,t){}var wt=["*"];function kt(s,t){if(s&1&&ee(0,"formly-field",1),s&2){let e=t.$implicit;L("field",e)}}var pt=["fieldComponent"];function It(s,t){let e=s._updateTreeValidity.bind(s);s._updateTreeValidity=()=>{},t(),s._updateTreeValidity=e}function At(s,t,e){if(t.id)return t.id;let r=t.type;return!r&&t.template&&(r="template"),r instanceof Z&&(r=r.prototype.constructor.name),[s,r,t.key,e].join("_")}function h(s){return!O(s.key)&&s.key!==""&&(!Array.isArray(s.key)||s.key.length>0)}function I(s){if(!h(s))return[];if(s._keyPath?.key!==s.key){let t=[];if(typeof s.key=="string"){let e=s.key.indexOf("[")===-1?s.key:s.key.replace(/\[(\w+)\]/g,".$1");t=e.indexOf(".")!==-1?e.split("."):[e]}else Array.isArray(s.key)?t=s.key.slice(0):t=[`${s.key}`];c(s,"_keyPath",{key:s.key,path:t})}return s._keyPath.path.slice(0)}var De=["required","pattern","minLength","maxLength","min","max"];function U(s,t){let e=I(s);if(e.length===0)return;let r=s;for(;r.parent;)r=r.parent,e=[...I(r),...e];if(t===void 0&&s.resetOnHide){let n=e.pop(),i=e.reduce((o,a)=>o[a]||{},r.model);delete i[n];return}Rt(r.model,e,t)}function Rt(s,t,e){for(let r=0;r<t.length-1;r++){let n=t[r];(!s[n]||!y(s[n]))&&(s[n]=/^\d+$/.test(t[r+1])?[]:{}),s=s[n]}s[t[t.length-1]]=C(e)}function A(s){let t=s.parent?s.parent.model:s.model;for(let e of I(s)){if(!t)return t;t=t[e]}return t}function G(s,...t){return t.forEach(e=>{for(let r in e)O(s[r])||Tt(s[r])?s[r]=C(e[r]):jt(s[r],e[r])&&G(s[r],e[r])}),s}function O(s){return s==null}function ne(s){return s===void 0}function Tt(s){return s===""}function ye(s){return typeof s=="function"}function jt(s,t){return y(s)&&y(t)&&Object.getPrototypeOf(s)===Object.getPrototypeOf(t)&&!(Array.isArray(s)||Array.isArray(t))}function y(s){return s!=null&&typeof s=="object"}function Vt(s){return!!s&&typeof s.then=="function"}function C(s){if(!y(s)||v(s)||s instanceof S||s.changingThisBreaksApplicationSecurity||["RegExp","FileList","File","Blob"].indexOf(s.constructor?.name)!==-1)return s;if(s instanceof Set)return new Set(s);if(s instanceof Map)return new Map(s);if(s instanceof Uint8Array)return new Uint8Array(s);if(s instanceof Uint16Array)return new Uint16Array(s);if(s instanceof Uint32Array)return new Uint32Array(s);if(s._isAMomentObject&&ye(s.clone))return s.clone();if(s instanceof at)return null;if(s instanceof Date)return new Date(s.getTime());if(Array.isArray(s))return s.slice(0).map(r=>C(r));let t=Object.getPrototypeOf(s),e=Object.create(t);return e=Object.setPrototypeOf(e,t),Object.keys(s).reduce((r,n)=>{let i=Object.getOwnPropertyDescriptor(s,n);return i.get?Object.defineProperty(r,n,i):r[n]=C(s[n]),r},e)}function c(s,t,e){Object.defineProperty(s,t,{enumerable:!1,writable:!0,configurable:!0}),s[t]=e}function Oe(s,t,e){let r=[],n=()=>{r.forEach(o=>o()),r=[]},i=p(s,t,({firstChange:o,currentValue:a})=>{!o&&e(),n(),y(a)&&a.constructor.name==="Object"&&Object.keys(a).forEach(l=>{r.push(Oe(s,[...t,l],e))})});return()=>{i.unsubscribe(),n()}}function p(s,t,e){s._observers||c(s,"_observers",{});let r=s;for(let a=0;a<t.length-1;a++)(!r[t[a]]||!y(r[t[a]]))&&(r[t[a]]=/^\d+$/.test(t[a+1])?[]:{}),r=r[t[a]];let n=t[t.length-1],i=t.join(".");s._observers[i]||(s._observers[i]={value:r[n],onChange:[]});let o=s._observers[i];if(r[n]!==o.value&&(o.value=r[n]),e&&o.onChange.indexOf(e)===-1&&(o.onChange.push(e),e({currentValue:o.value,firstChange:!0}),o.onChange.length>=1&&y(r))){let{enumerable:a}=Object.getOwnPropertyDescriptor(r,n)||{enumerable:!0};Object.defineProperty(r,n,{enumerable:a,configurable:!0,get:()=>o.value,set:l=>{if(l!==o.value){let u=o.value;o.value=l,o.onChange.forEach(g=>g({previousValue:u,currentValue:l,firstChange:!1}))}}})}return{setValue(a,l=!0){if(a===o.value)return;let u=o.value;o.value=a,o.onChange.forEach(g=>{g!==e&&l&&g({previousValue:u,currentValue:a,firstChange:!1})})},unsubscribe(){o.onChange=o.onChange.filter(a=>a!==e),o.onChange.length===0&&delete s._observers[i]}}}function dt(s,t){if(t=Array.isArray(t)?t.join("."):t,!!s.fieldGroup)for(let e=0,r=s.fieldGroup.length;e<r;e++){let n=s.fieldGroup[e],i=Array.isArray(n.key)?n.key.join("."):n.key;if(i===t)return n;if(n.fieldGroup&&(O(i)||t.indexOf(`${i}.`)===0)){let o=dt(n,O(i)?t:t.slice(i.length+1));if(o)return o}}}function be(s){s._componentRefs?.forEach(t=>{t instanceof Y?t.injector.get(tt).markForCheck():t.markForCheck()})}function Pt(s){return s instanceof Ye}function mt(s){let t=r=>r.hide||r.expressions?.hide||r.hideExpression,e=!s.resetOnHide||!t(s);if(!t(s)&&s.resetOnHide){let r=s.parent;for(;r&&!t(r);)r=r.parent;e=!r||!t(r)}return!e}function oe(){return+te.major>18||+te.major>=18&&+te.minor>=1}var B=new K("FORMLY_CONFIG"),D=(()=>{class s{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError(e){return e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)}},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(e){e.types&&e.types.forEach(r=>this.setType(r)),e.validators&&e.validators.forEach(r=>this.setValidator(r)),e.wrappers&&e.wrappers.forEach(r=>this.setWrapper(r)),e.validationMessages&&e.validationMessages.forEach(r=>this.addValidatorMessage(r.name,r.message)),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras=m(m({},this.extras),e.extras)),e.presets&&(this.presets=m(m({},this.presets),e.presets.reduce((r,n)=>H(m({},r),{[n.name]:n.config}),{})))}setType(e){Array.isArray(e)?e.forEach(r=>this.setType(r)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(r=>{e.hasOwnProperty(r)&&(this.types[e.name][r]=e[r])}))}getType(e,r=!1){if(e instanceof Z)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(r)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){let r=this.getType(e.type);if(!r)return;r.defaultOptions&&G(e,r.defaultOptions);let n=r.extends&&this.getType(r.extends).defaultOptions;n&&G(e,n),e?.optionsTypes&&e.optionsTypes.forEach(o=>{let a=this.getType(o).defaultOptions;a&&G(e,a)});let i=this.resolveFieldTypeRef(e);i?.instance?.defaultOptions&&G(e,i.instance.defaultOptions),!e.wrappers&&r.wrappers&&(e.wrappers=[...r.wrappers])}resolveFieldTypeRef(e={}){let r=this.getType(e.type);if(!r)return null;if(!r.component||r._componentRef)return r._componentRef;let{_viewContainerRef:n,_injector:i}=e.options;if(!n||!i)return null;let o=n.createComponent(r.component,{injector:i});c(r,"_componentRef",o);try{o.destroy()}catch(a){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,a)}return r._componentRef}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(r=>{this.setTypeWrapper(r,e.name)})}getWrapper(e){if(e instanceof Z)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,r){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),this.types[e].wrappers.indexOf(r)===-1&&this.types[e].wrappers.push(r)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,r){this.messages[e]=r}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach(r=>{let n=r.priority??1;this.extensionsByPriority[n]=H(m({},this.extensionsByPriority[n]),{[r.name]:r.extension})}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((r,n)=>r-n).reduce((r,n)=>m(m({},r),this.extensionsByPriority[n]),{})}mergeExtendedType(e){if(!this.types[e].extends)return;let r=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=r.component),this.types[e].wrappers||(this.types[e].wrappers=r.wrappers)}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=N({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ie=(()=>{class s{constructor(e,r,n,i){this.config=e,this.injector=r,this.viewContainerRef=n,this.parentForm=i}buildForm(e,r=[],n,i){this.build({fieldGroup:r,model:n,form:e,options:i})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent||this._setOptions(e),It(e.form,()=>{if(this._build(e),!e.parent||e.fieldArray){let r=e.options;e.parent&&mt(e)&&r._hiddenFieldsForCheck?.push({field:e,default:!1}),r.checkExpressions?.(e,!0),r._detectChanges?.(e)}})}_build(e){if(!e)return;let r=Object.values(this.config.extensions);r.forEach(n=>n.prePopulate?.(e)),r.forEach(n=>n.onPopulate?.(e)),e.fieldGroup?.forEach(n=>this._build(n)),r.forEach(n=>n.postPopulate?.(e))}_setOptions(e){e.form=e.form||new P({}),e.model=e.model||{},e.options=e.options||{};let r=e.options;r._viewContainerRef||c(r,"_viewContainerRef",this.viewContainerRef),r._injector||c(r,"_injector",this.injector),r.build||(r._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(e)},r.build=(n=e)=>(this.build(n),n)),!r.parentForm&&this.parentForm&&(c(r,"parentForm",this.parentForm),oe()||p(r,["parentForm","submitted"],({firstChange:n})=>{n||r.detectChanges(e)}))}}return s.\u0275fac=function(e){return new(e||s)(E(D),E(He),E(w,8),E(lt,8))},s.\u0275prov=N({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Gt(s,t=!1){let e=s.formControl,r=e._fields?e._fields.indexOf(s):-1;r!==-1&&e._fields.splice(r,1);let n=e.parent;if(!n)return;let i={emitEvent:t};if(n instanceof se){let o=n.controls.findIndex(a=>a===e);o!==-1&&n.removeAt(o,i)}else if(n instanceof P){let o=I(s),a=o[o.length-1];n.get([a])===e&&n.removeControl(a,i)}e.setParent(null)}function Ht(s){return s.formControl?s.formControl:s.shareFormControl===!1?null:s.form?.get(I(s))}function gt(s,t,e=!1){if(t=t||s.formControl,t._fields||c(t,"_fields",[]),t._fields.indexOf(s)===-1&&t._fields.push(s),!s.formControl&&t){c(s,"formControl",t),t.setValidators(null),t.setAsyncValidators(null),s.props.disabled=!!s.props.disabled;let a=p(s,["props","disabled"],({firstChange:l,currentValue:u})=>{l||(u?s.formControl.disable():s.formControl.enable())});t instanceof k&&t.registerOnDisabledChange(a.setValue)}if(!s.form||!h(s))return;let r=s.form,n=I(s),i=A(s);!(O(t.value)&&O(i))&&t.value!==i&&t instanceof k&&t.patchValue(i);for(let a=0;a<n.length-1;a++){let l=n[a];r.get([l])||r.setControl(l,new P({}),{emitEvent:e}),r=r.get([l])}let o=n[n.length-1];!s._hide&&r.get([o])!==t&&r.setControl(o,t,{emitEvent:e})}function Q(s,t=!1){let e=s.status,r=s.value;s.updateValueAndValidity({emitEvent:!1,onlySelf:t}),e!==s.status&&s.statusChanges.emit(s.status),r!==s.value&&s.valueChanges.emit(s.value)}function yt(s){delete s?._fields,s.setValidators(null),s.setAsyncValidators(null),(s instanceof P||s instanceof se)&&Object.values(s.controls).forEach(t=>yt(t))}var Nt=(()=>{class s{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}}return s.\u0275fac=function(e){return new(e||s)(d(S))},s.\u0275dir=$({type:s,selectors:[["","formlyTemplate",""]],inputs:{name:[0,"formlyTemplate","name"]},standalone:!1,features:[R]}),s})(),Fe=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=N({token:s,factory:s.\u0275fac}),s})(),bt=(()=>{class s{constructor(e,r,n,i,o){this.config=e,this.renderer=r,this._elementRef=n,this.hostContainerRef=i,this.form=o,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof Y?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e.unsubscribe()),this.hooksObservers.forEach(e=>e()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,r,n=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),n=this.field?.wrappers),n?.length>0){let[i,...o]=n,{component:a}=this.config.getWrapper(i),l=e.createComponent(a);this.attachComponentRef(l,r),p(l.instance,["fieldComponent"],({currentValue:u,previousValue:g,firstChange:f})=>{if(u){if(g&&g._lContainer===u._lContainer)return;let _=g?g.detach():null;_&&!_.destroyed?u.insert(_):this.renderField(u,r,o),!f&&l.changeDetectorRef.detectChanges()}})}else if(r?.type){let i=this.form?.templates?.find(a=>a.name===r.type),o;if(i)o=e.createEmbeddedView(i.ref,{$implicit:r});else{let{component:a}=this.config.getType(r.type,!0);o=e.createComponent(a)}this.attachComponentRef(o,r)}}triggerHook(e,r){if((e==="onInit"||e==="onChanges"&&r.field&&!r.field.firstChange)&&(this.valueChangesUnsubscribe(),this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!r||r.field)){let n=this.field.hooks[e](this.field);if(v(n)&&["onInit","afterContentInit","afterViewInit"].indexOf(e)!==-1){let i=n.subscribe();this.hooksObservers.push(()=>i.unsubscribe())}}e==="onChanges"&&r.field&&(this.resetRefs(r.field.previousValue),this.render())}attachComponentRef(e,r){this.componentRefs.push(e),r._componentRefs.push(e),e instanceof Y&&Object.assign(e.instance,{field:r})}render(){if(this.field){if(!this.field.options){this.detectFieldBuild=!0;return}if(this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e.unsubscribe()),this.hostObservers=[p(this.field,["hide"],({firstChange:e,currentValue:r})=>{let n=this.containerRef;this.config.extras.lazyRender===!1?(e&&this.renderField(n,this.field),(!e||e&&r)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",r?"none":"")):r?(n.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(n,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)}),p(this.field,["className"],({firstChange:e,currentValue:r})=>{(!e||e&&r)&&(!this.config.extras.lazyRender||this.field.hide!==!0)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",r)})],!oe())["touched","pristine","status"].forEach(e=>this.hostObservers.push(p(this.field,["formControl",e],({firstChange:r})=>!r&&be(this.field))));else if(this.field.formControl){let e=this.field.formControl.events.subscribe(()=>be(this.field));this.hostObservers.push(e)}}}resetRefs(e){e&&(e._localFields?e._localFields=[]:c(this.field,"_localFields",[]),e._componentRefs?e._componentRefs=e._componentRefs.filter(r=>this.componentRefs.indexOf(r)===-1):c(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(!e)return()=>{};let r=Oe(e,["props"],()=>e.options.detectChanges(e)),n=[()=>{r()}];for(let o of Object.keys(e._expressions||{})){let a=p(e,["_expressions",o],({currentValue:l,previousValue:u})=>{u?.subscription&&(u.subscription.unsubscribe(),u.subscription=null),v(l.value$)&&(l.subscription=l.value$.subscribe())});n.push(()=>{e._expressions[o]?.subscription&&e._expressions[o].subscription.unsubscribe(),a.unsubscribe()})}for(let o of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){let a=p(e,o,({firstChange:l})=>!l&&e.options.detectChanges(e));n.push(()=>a.unsubscribe())}if(e.formControl&&!e.fieldGroup){let o=e.formControl,a=o.valueChanges.pipe(ae(f=>(e.parsers?.map(_=>f=_(f,e)),Object.is(f,e.formControl.value)||e.formControl.setValue(f),f)),Ve((f,_)=>!(f!==_||Array.isArray(f)||y(f))));o.value!==A(e)&&(a=a.pipe(ue(o.value)));let{updateOn:l,debounce:u}=e.modelOptions;(!l||l==="change")&&u?.default>0&&(a=o.valueChanges.pipe(Te(u.default)));let g=a.subscribe(f=>{o._fields?.length>1&&o instanceof k&&o.patchValue(f,{emitEvent:!1,onlySelf:!0}),h(e)&&U(e,f),e.options.fieldChanges.next({value:f,field:e,type:"valueChanges"})});n.push(()=>g.unsubscribe())}let i=[];return p(e,["_localFields"],({currentValue:o})=>{i.forEach(a=>a()),i=(o||[]).map(a=>this.fieldChanges(a))}),()=>{n.forEach(o=>o()),i.forEach(o=>o())}}}return s.\u0275fac=function(e){return new(e||s)(d(D),d(fe),d(pe),d(w),d(Fe,8))},s.\u0275cmp=T({type:s,selectors:[["formly-field"]],viewQuery:function(e,r){if(e&1&&W(Mt,7,w),e&2){let n;j(n=V())&&(r.viewContainerRef=n.first)}},inputs:{field:"field"},standalone:!1,features:[R],decls:2,vars:0,consts:[["container",""]],template:function(e,r){e&1&&de(0,Et,0,0,"ng-template",null,0,et)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),s})(),Nr=(()=>{class s{constructor(e,r,n,i){this.builder=e,this.config=r,this.ngZone=n,this.fieldTemplates=i,this.modelChange=new Ne,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.config.extras.immutable&&this._modelChangeValue===e||this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}ngDoCheck(){this.config.extras.checkExpressionOn==="changeDetectionCheck"&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&yt(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();let e=null;if(oe()){let i=this.options?.parentForm?.submitted;e=this.form.events.subscribe(()=>{i!==this.options?.parentForm?.submitted&&(this.options.detectChanges(this.field),i=this.options?.parentForm?.submitted)})}let r=[Oe(this.field.options,["formState"],()=>this.field.options.detectChanges(this.field))],n=this.field.options.fieldChanges.pipe(le(({field:i,type:o})=>h(i)&&o==="valueChanges"),he(()=>Pt(this.ngZone)?M(null):this.ngZone.onStable.asObservable().pipe(je(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=C(this.model))}));return()=>{r.forEach(i=>i()),e?.unsubscribe(),n.unsubscribe()}}setField(e){this.config.extras.immutable?this.field=m(m({},this.field),C(e)):Object.keys(e).forEach(r=>this.field[r]=e[r])}}return s.\u0275fac=function(e){return new(e||s)(d(ie),d(D),d(Se),d(Fe))},s.\u0275cmp=T({type:s,selectors:[["formly-form"]],contentQueries:function(e,r,n){if(e&1&&qe(n,Nt,4),e&2){let i;j(i=V())&&(r.templates=i)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},standalone:!1,features:[Ze([ie,Fe]),R],decls:1,vars:1,consts:[[3,"field"]],template:function(e,r){e&1&&ee(0,"formly-field",0),e&2&&L("field",r.field)},dependencies:[bt],encapsulation:2,changeDetection:0}),s})(),Sr=(()=>{class s{constructor(e,r,n){this.renderer=e,this.elementRef=r,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(i,o)=>{switch(i){case"focus":return this.onFocus(o);case"blur":return this.onBlur(o);case"change":return this.onChange(o);default:return this.props[i](this.field,o)}}},this.document=n}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(r=>r()),this.uiEvents.events.forEach(r=>{(this.props?.[r]||["focus","blur","change"].indexOf(r)!==-1)&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,r,n=>this.uiEvents.callback(r,n)))}),this.props?.attributes&&p(this.field,["props","attributes"],({currentValue:r,previousValue:n})=>{n&&Object.keys(n).forEach(i=>this.removeAttribute(i)),r&&Object.keys(r).forEach(i=>{r[i]!=null&&this.setAttribute(i,r[i])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),this.fieldAttrElements.length===1&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=p(this.field,["focus"],({currentValue:r})=>{this.toggleFocus(r)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){let e=this.elementRef.nativeElement;this.uiAttributes=[...De,"tabindex","placeholder","readonly","disabled","step"].filter(r=>!e.hasAttribute||!e.hasAttribute(r))}for(let e=0;e<this.uiAttributes.length;e++){let r=this.uiAttributes[e],n=this.props[r];this.uiAttributesCache[r]!==n&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(r.toLowerCase()))&&(this.uiAttributesCache[r]=n,n||n===0?this.setAttribute(r,n===!0?r:`${n}`):this.removeAttribute(r))}}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){let r=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!r||!r.nativeElement.focus)return;let n=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:i})=>this.document.activeElement===i||i.contains(this.document.activeElement));e&&!n?Promise.resolve().then(()=>r.nativeElement.focus()):!e&&n&&Promise.resolve().then(()=>r.nativeElement.blur())}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){e&&(e._elementRefs?.indexOf(this.elementRef)===-1?e._elementRefs.push(this.elementRef):c(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){let r=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;r!==-1&&e._elementRefs.splice(r,1)}setAttribute(e,r){this.renderer.setAttribute(this.elementRef.nativeElement,e,r)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}}return s.\u0275fac=function(e){return new(e||s)(d(fe),d(pe),d(rt))},s.\u0275dir=$({type:s,selectors:[["","formlyAttributes",""]],hostBindings:function(e,r){e&1&&Be("change",function(i){return r.onHostChange(i)})},inputs:{field:[0,"formlyAttributes","field"],id:"id"},standalone:!1,features:[R]}),s})(),Me=(()=>{class s{constructor(){this.field={}}set _formlyControls(e){let r=this.field;r._localFields=e.map(n=>n.control._fields||[]).flat().filter(n=>n.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275dir=$({type:s,viewQuery:function(e,r){if(e&1&&W(ot,5),e&2){let n;j(n=V())&&(r._formlyControls=n)}},inputs:{field:"field"},standalone:!1}),s})(),St=(()=>{class s extends Me{}return s.\u0275fac=(()=>{let t;return function(r){return(t||(t=ce(s)))(r||s)}})(),s.\u0275cmp=T({type:s,selectors:[["formly-group"]],hostVars:2,hostBindings:function(e,r){e&2&&We(r.field.fieldGroupClassName||"")},standalone:!1,features:[J],ngContentSelectors:wt,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,r){e&1&&(Ue(),de(0,kt,1,1,"formly-field",0),Qe(1)),e&2&&L("ngForOf",r.field.fieldGroup)},dependencies:[bt,st],encapsulation:2,changeDetection:0}),s})(),Yr=(()=>{class s{constructor(e){this.config=e}ngOnChanges(){let e=De.map(r=>`templateOptions.${r}`);this.errorMessage$=Re(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe(le(({field:r,type:n,property:i})=>r===this.field&&n==="expressionChanges"&&(i.indexOf("validation")!==-1||e.indexOf(i)!==-1))):M(null)).pipe(ue(null),he(()=>v(this.errorMessage)?this.errorMessage:M(this.errorMessage)))}get errorMessage(){let e=this.field.formControl;for(let r in e.errors)if(e.errors.hasOwnProperty(r)){let n=this.config.getValidatorMessage(r);if(y(e.errors[r])){if(e.errors[r].errorPath)return;e.errors[r].message&&(n=e.errors[r].message)}return this.field.validation?.messages?.[r]&&(n=this.field.validation.messages[r]),this.field.validators?.[r]?.message&&(n=this.field.validators[r].message),this.field.asyncValidators?.[r]?.message&&(n=this.field.asyncValidators[r].message),typeof n=="function"?n(e.errors[r],this.field):n}}}return s.\u0275fac=function(e){return new(e||s)(d(D))},s.\u0275cmp=T({type:s,selectors:[["formly-validation-message"]],inputs:{field:"field"},standalone:!1,features:[R],decls:2,vars:3,template:function(e,r){e&1&&(ze(0),Xe(1,"async")),e&2&&Ke(Je(1,1,r.errorMessage$))},dependencies:[nt],encapsulation:2,changeDetection:0}),s})();var $r=(()=>{class s extends Me{set _formlyControls(e){}set _staticContent(e){this.fieldComponent=e}}return s.\u0275fac=(()=>{let t;return function(r){return(t||(t=ce(s)))(r||s)}})(),s.\u0275dir=$({type:s,viewQuery:function(e,r){if(e&1&&(W(pt,5,w),W(pt,7,w)),e&2){let n;j(n=V())&&(r.fieldComponent=n.first),j(n=V())&&(r._staticContent=n.first)}},standalone:!1,features:[J]}),s})(),Yt=(()=>{class s extends Me{constructor(e){super(),this.sanitizer=e,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return s.\u0275fac=function(e){return new(e||s)(d(it))},s.\u0275cmp=T({type:s,selectors:[["formly-template"]],standalone:!1,features:[J],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(e,r){e&1&&ee(0,"div",0),e&2&&L("innerHtml",r.template,$e)},encapsulation:2,changeDetection:0}),s})();function $t(s,t){try{return Function(...t,`return ${s};`)}catch(e){console.error(e)}}function Lt(s,t,e){return typeof s=="function"?s.apply(t,e):!!s}var Ce=class{onPopulate(t){if(t._expressions)return;c(t,"_expressions",{}),p(t,["hide"],({currentValue:r,firstChange:n})=>{c(t,"_hide",!!r),(!n||n&&r===!0)&&(t.props.hidden=r,t.options._hiddenFieldsForCheck.push({field:t}))}),t.hideExpression&&p(t,["hideExpression"],({currentValue:r})=>{t._expressions.hide=this.parseExpressions(t,"hide",typeof r=="boolean"?()=>r:r)});let e=(r,n)=>{typeof n=="string"||ye(n)?t._expressions[r]=this.parseExpressions(t,r,n):n instanceof Ie&&(t._expressions[r]={value$:n.pipe(Pe(i=>{this.evalExpr(t,r,i),t.options._detectChanges(t)}))})};t.expressions=t.expressions||{};for(let r of Object.keys(t.expressions))p(t,["expressions",r],({currentValue:n})=>{e(r,ye(n)?(...i)=>n(t,i[3]):n)});t.expressionProperties=t.expressionProperties||{};for(let r of Object.keys(t.expressionProperties))p(t,["expressionProperties",r],({currentValue:n})=>e(r,n))}postPopulate(t){if(!t.parent&&!t.options.checkExpressions){let e=!1;t.options.checkExpressions=(r,n)=>{if(e)return;e=!0;let i=this.checkExpressions(r,n),o=t.options;o._hiddenFieldsForCheck.sort(a=>a.field.hide?-1:1).forEach(a=>this.changeHideState(a.field,a.field.hide??a.default,!n)),o._hiddenFieldsForCheck=[],i&&this.checkExpressions(t),e=!1},t.options._checkField=(r,n)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),t.options.checkExpressions(r,n)}}}parseExpressions(t,e,r){let n;if(t.parent&&["hide","props.disabled"].includes(e)){let o=a=>e==="hide"?a.hide:a.props.disabled;n=()=>{let a=t.parent;for(;a.parent&&!o(a);)a=a.parent;return o(a)}}r=r||(()=>!1),typeof r=="string"&&(r=$t(r,["model","formState","field"]));let i;return{callback:o=>{try{let a=Lt(n?(...l)=>n(t)||r(...l):r,{field:t},[t.model,t.options.formState,t,o]);return o||i!==a&&(!y(a)||v(a)||JSON.stringify(a)!==JSON.stringify(i))?(i=a,this.evalExpr(t,e,a),!0):!1}catch(a){throw a.message=`[Formly Error] [Expression "${e}"] ${a.message}`,a}}}}checkExpressions(t,e=!1){if(!t)return!1;let r=!1;if(t._expressions)for(let n of Object.keys(t._expressions))t._expressions[n].callback?.(e)&&(r=!0);return t.fieldGroup?.forEach(n=>this.checkExpressions(n,e)&&(r=!0)),r}changeDisabledState(t,e){t.fieldGroup&&t.fieldGroup.filter(r=>!r._expressions.hasOwnProperty("props.disabled")).forEach(r=>this.changeDisabledState(r,e)),h(t)&&t.props.disabled!==e&&(t.props.disabled=e)}changeHideState(t,e,r){if(t.fieldGroup&&t.fieldGroup.filter(n=>n&&!n._expressions.hide).forEach(n=>this.changeHideState(n,e,r)),t.formControl&&h(t)){c(t,"_hide",!!(e||t.hide));let n=t.formControl;n._fields?.length>1&&Q(n),e===!0&&(!n._fields||n._fields.every(i=>!!i._hide))?(Gt(t,!0),r&&t.resetOnHide&&(U(t,void 0),t.formControl.reset({value:void 0,disabled:t.formControl.disabled}),t.options.fieldChanges.next({value:void 0,field:t,type:"valueChanges"}),t.fieldGroup&&t.formControl instanceof se&&(t.fieldGroup.length=0))):e===!1&&(t.resetOnHide&&!ne(t.defaultValue)&&ne(A(t))&&U(t,t.defaultValue),gt(t,void 0,!0),t.resetOnHide&&t.fieldArray&&t.fieldGroup?.length!==t.model?.length&&t.options.build(t))}t.options.fieldChanges&&t.options.fieldChanges.next({field:t,type:"hidden",value:e})}evalExpr(t,e,r){if(e.indexOf("model.")===0){let n=e.replace(/^model\./,""),i=t.fieldGroup?t:t.parent,o=t?.key===n?t.formControl:t.form.get(n);!o&&t.get(n)&&(o=t.get(n).formControl),U({key:n,parent:i,model:t.model},r),o&&!(O(o.value)&&O(r))&&o.value!==r&&o.patchValue(r)}else{try{let n=t,i=this._evalExpressionPath(t,e),o=i.length-1;for(let a=0;a<o;a++)n=n[i[a]];n[i[o]]=r}catch(n){throw n.message=`[Formly Error] [Expression "${e}"] ${n.message}`,n}["templateOptions.disabled","props.disabled"].includes(e)&&h(t)&&this.changeDisabledState(t,r)}this.emitExpressionChanges(t,e,r)}emitExpressionChanges(t,e,r){t.options.fieldChanges&&t.options.fieldChanges.next({field:t,type:"expressionChanges",property:e,value:r})}_evalExpressionPath(t,e){if(t._expressions[e]&&t._expressions[e].paths)return t._expressions[e].paths;let r=[];return e.indexOf("[")===-1?r=e.split("."):e.split(/[[\]]{1,2}/).filter(n=>n).forEach(n=>{let i=n.match(/['|"](.*?)['|"]/);i?r.push(i[1]):r.push(...n.split(".").filter(o=>o))}),t._expressions[e]&&(t._expressions[e].paths=r),r}},ve=class{constructor(t){this.config=t}onPopulate(t){this.initFieldValidation(t,"validators"),this.initFieldValidation(t,"asyncValidators")}initFieldValidation(t,e){let r=[];if(e==="validators"&&!(t.hasOwnProperty("fieldGroup")&&!h(t))&&r.push(this.getPredefinedFieldValidation(t)),t[e])for(let n of Object.keys(t[e]))n==="validation"?r.push(...t[e].validation.map(i=>this.wrapNgValidatorFn(t,i))):r.push(this.wrapNgValidatorFn(t,t[e][n],n));c(t,"_"+e,r)}getPredefinedFieldValidation(t){let e=[];return De.forEach(r=>p(t,["props",r],({currentValue:n,firstChange:i})=>{e=e.filter(o=>o!==r),r==="required"&&n!=null&&typeof n!="boolean"&&console.warn(`Formly: Invalid prop 'required' of type '${typeof n}', expected 'boolean' (Field:${t.key}).`),n!=null&&n!==!1&&e.push(r),!i&&t.formControl&&Q(t.formControl)})),r=>e.length===0?null:b.compose(e.map(n=>()=>{let i=t.props[n];switch(n){case"required":return b.required(r);case"pattern":return b.pattern(i)(r);case"minLength":let o=b.minLength(i)(r),a=this.config.getValidatorMessage("minlength")||t.validation?.messages?.minlength?"minlength":"minLength";return o?{[a]:o.minlength}:null;case"maxLength":let l=b.maxLength(i)(r),u=this.config.getValidatorMessage("maxlength")||t.validation?.messages?.maxlength?"maxlength":"maxLength";return l?{[u]:l.maxlength}:null;case"min":return b.min(i)(r);case"max":return b.max(i)(r);default:return null}}))(r)}wrapNgValidatorFn(t,e,r){let n;if(typeof e=="string"&&(n=C(this.config.getValidator(e))),typeof e=="object"&&e.name&&(n=C(this.config.getValidator(e.name)),e.options&&(n.options=e.options)),typeof e=="object"&&e.expression){let i=e,{expression:o}=i,a=q(i,["expression"]);n={name:r,validation:o,options:Object.keys(a).length>0?a:null}}return typeof e=="function"&&(n={name:r,validation:e}),o=>{let a=n.validation(o,t,n.options);return Vt(a)?a.then(l=>this.handleResult(t,r?!!l:l,n)):v(a)?a.pipe(ae(l=>this.handleResult(t,r?!!l:l,n))):this.handleResult(t,r?!!a:a,n)}}handleResult(t,e,{name:r,options:n}){typeof e=="boolean"&&(e=e?null:{[r]:n||!0});let i=t.formControl;return i?._childrenErrors?.[r]?.(),y(e)&&Object.keys(e).forEach(o=>{let a=e[o].errorPath?e[o].errorPath:n?.errorPath,l=a?t.formControl.get(a):null;if(l){let u=e[o],{errorPath:g}=u,f=q(u,["errorPath"]);l.setErrors(H(m({},l.errors||{}),{[o]:f})),!i._childrenErrors&&c(i,"_childrenErrors",{}),i._childrenErrors[o]=()=>{let we=l.errors||{},{[o]:_}=we,Ee=q(we,[ke(o)]);l.setErrors(Object.keys(Ee).length===0?null:Ee)}}}),e}},_e=class{prePopulate(t){this.root||(this.root=t),t.parent&&Object.defineProperty(t,"form",{get:()=>t.parent.formControl,configurable:!0})}onPopulate(t){t.hasOwnProperty("fieldGroup")&&!h(t)?c(t,"formControl",t.form):this.addFormControl(t)}postPopulate(t){if(this.root!==t)return;if(this.root=null,this.setValidators(t)&&t.parent){let r=t.parent;for(;r;)(h(r)||!r.parent)&&Q(r.formControl,!0),r=r.parent}}addFormControl(t){let e=Ht(t);if(!t.fieldArray){if(e){if(e instanceof k){let r=h(t)?A(t):t.defaultValue;e.defaultValue=r}}else{let r={updateOn:t.modelOptions.updateOn};if(t.fieldGroup)e=new P({},r);else{let n=h(t)?A(t):t.defaultValue;e=new k({value:n,disabled:!!t.props.disabled},H(m({},r),{initialValueIsDefault:!0}))}}gt(t,e)}}setValidators(t,e=!1){e===!1&&h(t)&&t.props?.disabled&&(e=!0);let r=!1;if(t.fieldGroup?.forEach(n=>n&&this.setValidators(n,e)&&(r=!0)),h(t)||!t.parent||!h(t)&&!t.fieldGroup){let{formControl:n}=t;if(n&&(h(t)&&n instanceof k&&(e&&n.enabled&&(n.disable({emitEvent:!1,onlySelf:!0}),r=!0),!e&&n.disabled&&(n.enable({emitEvent:!1,onlySelf:!0}),r=!0)),n.validator===null&&this.hasValidators(t,"_validators")&&(n.setValidators(()=>{let i=b.compose(this.mergeValidators(t,"_validators"));return i?i(n):null}),r=!0),n.asyncValidator===null&&this.hasValidators(t,"_asyncValidators")&&(n.setAsyncValidators(()=>{let i=b.composeAsync(this.mergeValidators(t,"_asyncValidators"));return i?i(n):M(null)}),r=!0),r)){Q(n,!0);let i=n.parent;for(let o=1;o<I(t).length;o++)i&&(Q(i,!0),i=i.parent)}}return r}hasValidators(t,e){let r=t.formControl;return r?._fields?.length>1&&r._fields.some(n=>n[e].length>0)||t[e].length>0?!0:t.fieldGroup?.some(n=>n?.fieldGroup&&!h(n)&&this.hasValidators(n,e))}mergeValidators(t,e){let r=[],n=t.formControl;return n?._fields?.length>1?n._fields.filter(i=>!i._hide).forEach(i=>r.push(...i[e])):t[e]&&r.push(...t[e]),t.fieldGroup&&t.fieldGroup.filter(i=>i?.fieldGroup&&!h(i)).forEach(i=>r.push(...this.mergeValidators(i,e))),r}},xe=class{constructor(t){this.config=t,this.formId=0}prePopulate(t){let e=t.parent;this.initRootOptions(t),this.initFieldProps(t),e&&(Object.defineProperty(t,"options",{get:()=>e.options,configurable:!0}),Object.defineProperty(t,"model",{get:()=>h(t)&&t.fieldGroup?A(t):e.model,configurable:!0})),Object.defineProperty(t,"get",{value:r=>dt(t,r),configurable:!0}),this.getFieldComponentInstance(t).prePopulate?.(t)}onPopulate(t){this.initFieldOptions(t),this.getFieldComponentInstance(t).onPopulate?.(t),t.fieldGroup&&t.fieldGroup.forEach((e,r)=>{e&&(Object.defineProperty(e,"parent",{get:()=>t,configurable:!0}),Object.defineProperty(e,"index",{get:()=>r,configurable:!0})),this.formId++})}postPopulate(t){this.getFieldComponentInstance(t).postPopulate?.(t)}initFieldProps(t){t.props??(t.props=t.templateOptions),Object.defineProperty(t,"templateOptions",{get:()=>t.props,set:e=>t.props=e,configurable:!0})}initRootOptions(t){if(t.parent)return;let e=t.options;t.options.formState=t.options.formState||{},e.showError||(e.showError=this.config.extras.showError),e.fieldChanges||c(e,"fieldChanges",new Ae),e._hiddenFieldsForCheck||(e._hiddenFieldsForCheck=[]),e._markForCheck=r=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),e.detectChanges(r)},e._detectChanges=r=>{r._componentRefs&&be(r),r.fieldGroup?.forEach(n=>n&&e._detectChanges(n))},e.detectChanges=r=>{r.options.checkExpressions?.(r),e._detectChanges(r)},e.resetModel=r=>{r=C(r??e._initialModel),t.model&&(Object.keys(t.model).forEach(n=>delete t.model[n]),Object.assign(t.model,r||{})),oe()||p(e,["parentForm","submitted"]).setValue(!1,!1),e.build(t),t.form.reset(t.model)},e.updateInitialValue=r=>e._initialModel=C(r??t.model),t.options.updateInitialValue()}initFieldOptions(t){G(t,{id:At(`formly_${this.formId}`,t,t.index),hooks:{},modelOptions:{},validation:{messages:{}},props:!t.type||!h(t)?{}:{label:"",placeholder:"",disabled:!1}}),this.config.extras.resetFieldOnHide&&t.resetOnHide!==!1&&(t.resetOnHide=!0),t.type!=="formly-template"&&(t.template||t.expressions?.template||t.expressionProperties?.template)&&(t.type="formly-template"),!t.type&&t.fieldGroup&&(t.type="formly-group"),t.type&&this.config.getMergedField(t),h(t)&&!ne(t.defaultValue)&&ne(A(t))&&!mt(t)&&U(t,t.defaultValue),t.wrappers=t.wrappers||[]}getFieldComponentInstance(t){let e=()=>{let r=this.config.resolveFieldTypeRef(t),n=t._componentRefs?.slice(-1)[0];return n instanceof Y&&n?.componentType===r?.componentType&&(r=n),r?.instance};return t._proxyInstance||c(t,"_proxyInstance",new Proxy({},{get:(r,n)=>e()?.[n],set:(r,n,i)=>e()[n]=i})),t._proxyInstance}};function ft(s){return{types:[{name:"formly-group",component:St},{name:"formly-template",component:Yt}],extensions:[{name:"core",extension:new xe(s),priority:-250},{name:"field-validation",extension:new ve(s),priority:-200},{name:"field-form",extension:new _e,priority:-150},{name:"field-expression",extension:new Ce,priority:-100}]}}var Lr=(()=>{class s{constructor(e,r=[]){r&&r.forEach(n=>e.addConfig(n))}static forRoot(e={}){return{ngModule:s,providers:[{provide:B,multi:!0,useFactory:ft,deps:[D]},{provide:B,useValue:e,multi:!0},D,ie]}}static forChild(e={}){return{ngModule:s,providers:[{provide:B,multi:!0,useFactory:ft,deps:[D]},{provide:B,useValue:e,multi:!0},ie]}}}return s.\u0275fac=function(e){return new(e||s)(E(D),E(B,8))},s.\u0275mod=X({type:s}),s.\u0275inj=z({imports:[[re]]}),s})();var Ft=class extends me{constructor(){super(...arguments),this._delegate=Ge(me)}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}compareDatetime(t,e,r=!0){return this.compareDate(t,e)||this.getHour(t)-this.getHour(e)||r&&this.getMinute(t)-this.getMinute(e)}sameDatetime(t,e){if(t&&e){let r=this.isValid(t),n=this.isValid(e);return r&&n?!this.compareDatetime(t,e):r===n}return t===e}sameYear(t,e){return t&&e&&this.getYear(t)===this.getYear(e)}sameDay(t,e){return t&&e&&this.getDate(t)===this.getDate(e)&&this.sameMonthAndYear(t,e)}sameHour(t,e){return t&&e&&this.getHour(t)===this.getHour(e)&&this.sameDay(t,e)}sameMinute(t,e){return t&&e&&this.getMinute(t)===this.getMinute(e)&&this.sameHour(t,e)}sameMonthAndYear(t,e){if(t&&e){let r=this.isValid(t),n=this.isValid(e);return r&&n?!(this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)):r===n}return t===e}clone(t){return this._delegate.clone(t)}addCalendarYears(t,e){return this._delegate.addCalendarYears(t,e)}addCalendarMonths(t,e){return this._delegate.addCalendarMonths(t,e)}addCalendarDays(t,e){return this._delegate.addCalendarDays(t,e)}getYear(t){return this._delegate.getYear(t)}getMonth(t){return this._delegate.getMonth(t)}getDate(t){return this._delegate.getDate(t)}getDayOfWeek(t){return this._delegate.getDayOfWeek(t)}getMonthNames(t){return this._delegate.getMonthNames(t)}getDateNames(){return this._delegate.getDateNames()}getDayOfWeekNames(t){return this._delegate.getDayOfWeekNames(t)}getYearName(t){return this._delegate.getYearName(t)}getFirstDayOfWeek(){return this._delegate.getFirstDayOfWeek()}getNumDaysInMonth(t){return this._delegate.getNumDaysInMonth(t)}createDate(t,e,r){return this._delegate.createDate(t,e,r)}today(){return this._delegate.today()}parse(t,e){return this._delegate.parse(t,e)}format(t,e){return this._delegate.format(t,e)}toIso8601(t){return this._delegate.toIso8601(t)}isDateInstance(t){return this._delegate.isDateInstance(t)}isValid(t){return this._delegate.isValid(t)}invalid(){return this._delegate.invalid()}clampDate(t,e,r){return e&&this.compareDatetime(t,e)<0?e:r&&this.compareDatetime(t,r)>0?r:t}},rs=new K("mtx-datetime-formats"),ss=Ct(24,s=>String(s)),ns=Ct(60,s=>String(s));function Ct(s,t){let e=Array(s);for(let r=0;r<s;r++)e[r]=t(r);return e}var is=(()=>{class s{transform(e){return v(e)?e:M(e)}static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275pipe=Le({name:"toObservable",type:s,pure:!0})}}return s})();var os=(()=>{class s{static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275mod=X({type:s})}static{this.\u0275inj=z({imports:[re]})}}return s})();export{Bt as a,Ut as b,Qt as c,qt as d,zt as e,F as f,x as g,ir as h,ht as i,yr as j,Ft as k,rs as l,is as m,os as n,c as o,p,B as q,Nr as r,Sr as s,Me as t,Yr as u,$r as v,Lr as w};
