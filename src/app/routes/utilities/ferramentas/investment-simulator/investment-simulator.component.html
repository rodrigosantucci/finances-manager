<div class="page-wrapper">
  <div class="container">
    <header class="header">
    </header>
    <main class="main-content">
      <form id="investmentForm" class="investment-form" (ngSubmit)="onSubmit()">
        <div class="form-group full-width-select">
          <label for="investmentType">Tipo de Investimento:</label>
          <div class="select-wrapper">
            <select id="investmentType" [(ngModel)]="investmentType" name="investmentType" (ngModelChange)="onInvestmentTypeChange()">
              <option value="">Selecione...</option>
              <option value="rendaFixa">Renda Fixa</option>
              <option value="rendaVariavel">Renda Variável</option>
            </select>
          </div>
        </div>

        <div id="rendaFixaFields" class="investment-fields" [ngClass]="{'hidden': investmentType !== 'rendaFixa'}">
          <div class="form-row">
            <div class="form-group">
              <label for="initialAmountRF">Valor Inicial (R$):</label>
              <input type="text" id="initialAmountRF" [(ngModel)]="initialAmountRF" name="initialAmountRF" placeholder="Ex: 1.000,00" data-type="currency">
            </div>
            <div class="form-group">
              <label for="monthlyContributionRF">Aporte Mensal (R$):</label>
              <input type="text" id="monthlyContributionRF" [(ngModel)]="monthlyContributionRF" name="monthlyContributionRF" placeholder="Ex: 100,00" data-type="currency">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="interestRateRF">Taxa de Juros Anual (%):</label>
              <input type="text" id="interestRateRF" [(ngModel)]="interestRateRF" name="interestRateRF" placeholder="Ex: 10,00" data-type="percentage">
            </div>
            <div class="form-group">
              <label for="timeRF">Tempo de Investimento: <span id="timeValueRF">{{ timeRF }}</span> &nbsp; <span id="timeUnitRF">&nbsp;{{ timeUnitRF === 'years' ? (timeRF === 1 ? 'ano' : 'anos') : (timeRF === 1 ? 'mês' : 'meses') }} </span></label>
              <input type="range" id="timeRF" [(ngModel)]="timeRF" name="timeRF" min="1" [max]="timeUnitRF === 'years' ? 50 : 600" (input)="updateTimeRF()">
            </div>
          </div>
          <div class="form-group full-width-select">
            <label for="timeUnitSelectorRF">Unidade de Tempo:</label>
            <div class="select-wrapper">
              <select id="timeUnitSelectorRF" [(ngModel)]="timeUnitRF" name="timeUnitSelectorRF" (ngModelChange)="updateTimeRF()">
                <option value="months">Meses</option>
                <option value="years">Anos</option>
              </select>
            </div>
          </div>
        </div>

        <div id="rendaVariavelFields" class="investment-fields" [ngClass]="{'hidden': investmentType !== 'rendaVariavel'}">
          <div class="form-row">
            <div class="form-group">
              <label for="initialAmountRV">Valor Inicial (R$):</label>
              <input type="text" id="initialAmountRV" [(ngModel)]="initialAmountRV" name="initialAmountRV" placeholder="Ex: 5.000,00" data-type="currency">
            </div>
            <div class="form-group">
              <label for="monthlyContributionRV">Aporte Mensal (R$):</label>
              <input type="text" id="monthlyContributionRV" [(ngModel)]="monthlyContributionRV" name="monthlyContributionRV" placeholder="Ex: 200,00" data-type="currency">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="expectedReturnRV">Retorno Esperado Anual (%):</label>
              <input type="text" id="expectedReturnRV" [(ngModel)]="expectedReturnRV" name="expectedReturnRV" placeholder="Ex: 15,00" data-type="percentage">
            </div>
            <div class="form-group">
              <label for="dividendYieldRV">% de Dividendos Pagos Anual:</label>
              <input type="text" id="dividendYieldRV" [(ngModel)]="dividendYieldRV" name="dividendYieldRV" placeholder="Ex: 3,00" data-type="percentage">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="timeRV">Tempo de Investimento: <span id="timeValueRV">{{ timeRV }}</span> &nbsp; <span id="timeUnitRV">{{ timeUnitRV === 'years' ? (timeRV === 1 ? 'ano' : 'anos') : (timeRV === 1 ? 'mês' : 'meses') }}</span></label>
              <input type="range" id="timeRV" [(ngModel)]="timeRV" name="timeRV" min="1" [max]="timeUnitRV === 'years' ? 50 : 600" (input)="updateTimeRV()">
            </div>
            <div class="form-group full-width-select">
              <label for="timeUnitSelectorRV">Unidade de Tempo:</label>
              <div class="select-wrapper">
                <select id="timeUnitSelectorRV" [(ngModel)]="timeUnitRV" name="timeUnitSelectorRV" (ngModelChange)="updateTimeRV()">
                  <option value="months">Meses</option>
                  <option value="years">Anos</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <button type="submit" id="simulateButton" class="simulate-button" [disabled]="!investmentType">Simular</button>
      </form>

      <section id="results" class="results-section" [ngClass]="{'hidden': !showResults}">
        <h2>Resultados da Simulação</h2>
        <div class="result-item">
          <p>Valor Total Investido:</p>
          <span>{{ results?.totalInvested }}</span>
        </div>
        <div class="result-item">
          <p>Rendimento Total:</p>
          <span>{{ results?.totalReturn }}</span>
        </div>
        <div class="result-item" id="dividendsPaidItem" [ngClass]="{'hidden': !results?.showDividends}">
          <p>Total de Dividendos:</p>
          <span>{{ results?.totalDividends }}</span>
        </div>
        <div class="result-item">
          <p>Valor Total Bruto:</p>
          <span>{{ results?.grossTotal }}</span>
        </div>
        <div class="result-item" id="finalValueNetItem" [ngClass]="{'hidden': !results?.showNetTotal}">
          <p>Valor Total Líquido (após impostos/taxas):</p>
          <span>{{ results?.netTotal }}</span>
        </div>
        <p class="disclaimer">*Os valores apresentados são estimativas e podem variar.</p>
      </section>
    </main>
  </div>
</div>
